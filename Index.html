<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Educativo Digital - Cómic de las 4 Materias</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Variables con paletas actualizadas según las especificaciones */
        :root {
            /* Paleta 1 - Cyberpunk (para complementos) */
            --cyber-orange: #FD8326;
            --cyber-pink: #F59192;
            --cyber-red: #F4545E;
            --cyber-dark-red: #D32729;
            --cyber-purple: #6D2A4F;
            --cyber-dark: #25091C;
            
            /* Paleta 5 - Azul para Matemáticas */
            --matematicas-dark: #19192E;
            --matematicas-medium: #003E91;
            --matematicas-deep: #002063;
            --matematicas-navy: #041642;
            --matematicas-light: #27A8FF;
            
            /* Paleta 2 - Japonés Rojo para Lengua */
            --lengua-black: #070709;
            --lengua-brown: #4B2D2E;
            --lengua-rust: #824334;
            --lengua-red: #F42C1D;
            --lengua-dark-red: #AE1918;
            --lengua-deep-red: #701C1A;
            
            /* Paleta 3 - Green Gray para Ciencias Naturales */
            --naturales-dark: #162936;
            --naturales-gray: #3B5265;
            --naturales-neon: #27E9B5;
            --naturales-deep: #051824;
            --naturales-light: #4CD9B4;
            
            /* Paleta 4 - Turquesa para Ciencias Sociales */
            --sociales-dark: #222831;
            --sociales-blue: #283B48;
            --sociales-turq: #00A6C0;
            --sociales-beige: #D8D7CE;
            --sociales-light: #00C8E0;
            
            /* Complementos opcionales para Sociales */
            --sociales-complement-purple: #6D2A4F;
            --sociales-complement-dark: #25091C;
            
            /* Asignación de variables por materia */
            --matematicas: var(--matematicas-light);
            --matematicas-dark: var(--matematicas-navy);
            --lengua: var(--lengua-red);
            --lengua-dark: var(--lengua-deep-red);
            --sociales: var(--sociales-turq);
            --sociales-dark: var(--sociales-blue);
            --naturales: var(--naturales-neon);
            --naturales-dark: var(--naturales-deep);
            
            /* Colores generales */
            --primary: var(--cyber-orange);
            --secondary: var(--cyber-pink);
            --background: var(--matematicas-dark);
            --card-bg: rgba(25, 25, 46, 0.8);
            --text-light: #ffffff;
            --text-dark: #070709;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text-light);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-image: radial-gradient(circle at 10% 20%, rgba(253, 131, 38, 0.15) 0%, transparent 20%), 
                            radial-gradient(circle at 90% 80%, rgba(39, 233, 181, 0.15) 0%, transparent 20%);
        }
        
        /* Efectos de partículas flotantes */
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.3;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 20s infinite linear;
            opacity: 0.3;
        }
        
        /* Partículas de colores según materias */
        .particle:nth-child(4n+1) {
            background: radial-gradient(circle, var(--matematicas-light), transparent);
        }
        
        .particle:nth-child(4n+2) {
            background: radial-gradient(circle, var(--lengua-red), transparent);
        }
        
        .particle:nth-child(4n+3) {
            background: radial-gradient(circle, var(--sociales-turq), transparent);
        }
        
        .particle:nth-child(4n+4) {
            background: radial-gradient(circle, var(--naturales-neon), transparent);
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, 50px) rotate(90deg); }
            50% { transform: translate(50px, 100px) rotate(180deg); }
            75% { transform: translate(-50px, 50px) rotate(270deg); }
        }
        
        /* Estilo cómic - globos de diálogo */
        .comic-bubble {
            position: relative;
            background: white;
            color: black;
            padding: 15px;
            border-radius: 20px;
            border: 3px solid black;
            margin: 20px;
            font-family: 'Bangers', cursive;
            font-size: 1.2rem;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
        }
        
        .comic-bubble:after {
            content: '';
            position: absolute;
            border-style: solid;
            border-width: 15px 15px 0;
            border-color: white transparent;
            display: block;
            width: 0;
            z-index: 1;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .comic-bubble:before {
            content: '';
            position: absolute;
            border-style: solid;
            border-width: 18px 18px 0;
            border-color: black transparent;
            display: block;
            width: 0;
            z-index: 0;
            bottom: -21px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* Estilo cómic - líneas de movimiento */
        .motion-line {
            position: absolute;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                var(--cyber-orange) 10px,
                var(--cyber-orange) 20px
            );
            transform: rotate(45deg);
            opacity: 0.7;
        }
        
        /* Animaciones globales */
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(253, 131, 38, 0.5); }
            50% { box-shadow: 0 0 25px rgba(253, 131, 38, 0.8); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        a {
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Botones con estilo cómic */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(45deg, var(--primary), var(--cyber-red));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 900;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
            box-shadow: 0 5px 15px rgba(253, 131, 38, 0.4);
            font-family: 'Bangers', cursive;
            font-size: 1.1rem;
            letter-spacing: 1px;
            border: 3px solid var(--text-light);
        }
        
        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(253, 131, 38, 0.6);
            animation: pulseGlow 1.5s infinite;
        }
        
        .btn-comic-creator {
            background: linear-gradient(45deg, var(--sociales-complement-purple), var(--lengua-red));
            font-size: 1.3rem;
            padding: 15px 30px;
            margin: 20px 0;
        }
        
        /* Header completo que desaparece al hacer scroll */
        .comic-header {
            background-color: rgba(25, 25, 46, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 3px solid var(--primary);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            transform: translateY(0);
        }
        
        .comic-header.hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }
        
        .comic-header.visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }
        
        .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            position: relative;
            transition: all 0.4s ease;
        }
        
        .logo {
            font-size: 2.8rem;
            font-weight: 900;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(45deg, var(--matematicas-light), var(--lengua-red), var(--naturales-neon));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 0 5px 15px rgba(39, 168, 255, 0.3);
            font-family: 'Bangers', cursive;
        }
        
        .logo span {
            color: transparent;
            background: linear-gradient(45deg, var(--sociales-turq), var(--cyber-pink));
            -webkit-background-clip: text;
            background-clip: text;
        }
        
        .search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 10px 20px;
            width: 300px;
            border: 2px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .search-bar:hover {
            width: 320px;
            box-shadow: 0 8px 25px rgba(253, 131, 38, 0.3);
            border-color: var(--naturales-neon);
        }
        
        .search-bar input {
            border: none;
            outline: none;
            flex: 1;
            padding: 8px;
            background: transparent;
            color: white;
            font-size: 1rem;
        }
        
        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .search-bar button {
            background: transparent;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .search-bar button:hover {
            color: var(--naturales-neon);
            transform: scale(1.2);
        }
        
        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-actions a {
            font-weight: 700;
            padding: 8px 15px;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .user-actions .sign-in {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .user-actions .sign-in:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--primary);
        }
        
        .user-welcome {
            display: none;
            align-items: center;
            gap: 10px;
            background: linear-gradient(45deg, var(--matematicas-medium), var(--sociales-complement-purple));
            padding: 8px 20px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 62, 145, 0.4);
        }
        
        .user-welcome i {
            color: var(--primary);
        }
        
        .user-welcome span {
            font-weight: 700;
        }
        
        .logout-btn {
            background: none;
            border: none;
            color: var(--lengua-red);
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 10px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            transform: scale(1.2);
        }
        
        /* Navegación con estilo cómic */
        .comic-nav {
            background: linear-gradient(90deg, 
                var(--matematicas-navy) 0%, 
                var(--lengua-deep-red) 25%, 
                var(--sociales-blue) 50%, 
                var(--naturales-deep) 75%, 
                var(--matematicas-navy) 100%);
            backdrop-filter: blur(10px);
            padding: 0;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            border-top: 2px solid var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        .nav-list {
            display: flex;
            list-style: none;
            justify-content: center;
        }
        
        .nav-list li {
            position: relative;
        }
        
        .nav-list a {
            display: block;
            padding: 18px 25px;
            font-weight: 900;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-family: 'Bangers', cursive;
            letter-spacing: 1px;
            font-size: 1.1rem;
            background: rgba(7, 7, 9, 0.3);
            backdrop-filter: blur(5px);
        }
        
        .nav-list a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 4px;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-list a:hover {
            color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            backdrop-filter: blur(10px);
        }
        
        .nav-list a:hover::after {
            width: 80%;
        }
        
        /* Estilo específico para enlaces de materias con nuevos colores */
        .nav-matematicas:hover {
            color: var(--matematicas-light) !important;
        }
        
        .nav-matematicas:hover::after {
            background: linear-gradient(90deg, var(--matematicas-light), var(--matematicas-medium));
        }
        
        .nav-lengua:hover {
            color: var(--lengua-red) !important;
        }
        
        .nav-lengua:hover::after {
            background: linear-gradient(90deg, var(--lengua-red), var(--lengua-rust));
        }
        
        .nav-sociales:hover {
            color: var(--sociales-turq) !important;
        }
        
        .nav-sociales:hover::after {
            background: linear-gradient(90deg, var(--sociales-turq), var(--sociales-light));
        }
        
        .nav-naturales:hover {
            color: var(--naturales-neon) !important;
        }
        
        .nav-naturales:hover::after {
            background: linear-gradient(90deg, var(--naturales-neon), var(--naturales-light));
        }
        
        .dropdown-menu {
            display: none;
            position: absolute;
            background: rgba(7, 7, 9, 0.95);
            backdrop-filter: blur(15px);
            min-width: 220px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            z-index: 1;
            border-radius: 0 0 10px 10px;
            overflow: hidden;
            border-top: 3px solid var(--primary);
            animation: fadeIn 0.3s ease;
            border: 2px solid var(--primary);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dropdown-menu li {
            width: 100%;
        }
        
        .dropdown-menu a {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 1rem;
            background: transparent;
        }
        
        .dropdown-menu a:hover {
            background: rgba(253, 131, 38, 0.2);
            padding-left: 30px;
        }
        
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        
        /* Efectos hover flotantes */
        .hover-float {
            transition: all 0.4s ease;
        }
        
        .hover-float:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(253, 131, 38, 0.4);
        }
        
        /* Contenedor principal de contenido */
        .main-content {
            padding: 60px 0;
            position: relative;
            margin-top: 160px;
            min-height: calc(100vh - 300px);
            transition: margin-top 0.4s ease;
        }
        
        /* Estilos para secciones */
        .section-title {
            font-size: 3rem;
            margin-bottom: 40px;
            padding-bottom: 15px;
            position: relative;
            display: block;
            text-align: center;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            color: var(--text-light);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
        }
        
        #galeria .section-title,
        #ranking .section-title {
            color: var(--text-light) !important;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
        }
        
        .section-title-matematicas {
            color: transparent;
            background: linear-gradient(90deg, var(--matematicas-light), var(--matematicas-medium));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3);
        }
        
        .section-title-lengua {
            color: transparent;
            background: linear-gradient(90deg, var(--lengua-red), var(--lengua-rust));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3);
        }
        
        .section-title-sociales {
            color: transparent;
            background: linear-gradient(90deg, var(--sociales-turq), var(--sociales-light));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3);
        }
        
        .section-title-naturales {
            color: transparent;
            background: linear-gradient(90deg, var(--naturales-neon), var(--naturales-light));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.3);
        }
        
        .section-title:hover {
            transform: translateY(-5px);
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 5px;
            border-radius: 5px;
            animation: pulseGlow 2s infinite ease-in-out;
        }
        
        #galeria .section-title::after,
        #ranking .section-title::after {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .section-title-matematicas::after {
            background: linear-gradient(90deg, var(--matematicas-light), var(--matematicas-medium));
        }
        
        .section-title-lengua::after {
            background: linear-gradient(90deg, var(--lengua-red), var(--lengua-rust));
        }
        
        .section-title-sociales::after {
            background: linear-gradient(90deg, var(--sociales-turq), var(--sociales-light));
        }
        
        .section-title-naturales::after {
            background: linear-gradient(90deg, var(--naturales-neon), var(--naturales-light));
        }
        
        /* Estilos para contenido dinámico */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .content-section.active {
            display: block;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            justify-items: center;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }
        
        .comic-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.4s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 300px;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            margin: 0 auto;
        }
        
        #galleryGrid .comic-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        #ranking .comic-card h3 {
            color: var(--text-light) !important;
            text-shadow: 2px 2px 3px rgba(0,0,0,0.5);
        }
        
        .comic-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            transform: rotate(45deg);
            transition: all 0.5s ease;
        }
        
        .comic-card:hover::before {
            animation: shine 1.5s ease;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .comic-card:hover {
            transform: translateY(-10px) rotate(1deg);
            box-shadow: 15px 15px 0px rgba(0,0,0,0.3);
        }
        
        .comic-card i {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .comic-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-family: 'Bangers', cursive;
            letter-spacing: 1px;
        }
        
        /* Colores específicos para cada materia con NUEVAS PALETAS */
        .matematicas-card {
            border: 3px solid var(--matematicas-light);
            background: linear-gradient(135deg, rgba(25, 25, 46, 0.9), rgba(4, 22, 66, 0.9));
        }
        
        .matematicas-card::before {
            background: linear-gradient(45deg, transparent, rgba(39, 168, 255, 0.1), transparent);
        }
        
        .matematicas-card h3, .matematicas-card i {
            color: var(--matematicas-light);
        }
        
        .matematicas-card:hover {
            border-color: var(--matematicas-medium);
        }
        
        .lengua-card {
            border: 3px solid var(--lengua-red);
            background: linear-gradient(135deg, rgba(7, 7, 9, 0.9), rgba(112, 28, 26, 0.9));
        }
        
        .lengua-card::before {
            background: linear-gradient(45deg, transparent, rgba(244, 44, 29, 0.1), transparent);
        }
        
        .lengua-card h3, .lengua-card i {
            color: var(--lengua-red);
        }
        
        .lengua-card:hover {
            border-color: var(--lengua-rust);
        }
        
        .sociales-card {
            border: 3px solid var(--sociales-turq);
            background: linear-gradient(135deg, rgba(34, 40, 49, 0.9), rgba(40, 59, 72, 0.9));
        }
        
        .sociales-card::before {
            background: linear-gradient(45deg, transparent, rgba(0, 166, 192, 0.1), transparent);
        }
        
        .sociales-card h3, .sociales-card i {
            color: var(--sociales-turq);
        }
        
        .sociales-card:hover {
            border-color: var(--sociales-light);
        }
        
        .naturales-card {
            border: 3px solid var(--naturales-neon);
            background: linear-gradient(135deg, rgba(22, 41, 54, 0.9), rgba(5, 24, 36, 0.9));
        }
        
        .naturales-card::before {
            background: linear-gradient(45deg, transparent, rgba(39, 233, 181, 0.1), transparent);
        }
        
        .naturales-card h3, .naturales-card i {
            color: var(--naturales-neon);
        }
        
        .naturales-card:hover {
            border-color: var(--naturales-light);
        }
        
        /* Estilos para la página de inicio - MEJORADO para centrar */
        .hero {
            position: relative;
            height: 600px;
            overflow: hidden;
            margin-bottom: 60px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            border: 5px solid var(--primary);
        }
        
        .hero-slider {
            height: 100%;
            position: relative;
        }
        
        .slide {
            height: 100%;
            background-size: cover;
            background-position: center;
            display: none;
            position: relative;
        }
        
        .slide.active {
            display: block;
            animation: slideIn 1s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0.5; transform: scale(1.1); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .slide-content {
            position: absolute;
            bottom: 120px;
            left: 100px;
            max-width: 600px;
            background: rgba(7, 7, 9, 0.85);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            border-left: 8px solid var(--primary);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            transition: all 0.4s ease;
            border: 3px solid var(--primary);
        }
        
        .slide-content:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(253, 131, 38, 0.5);
        }
        
        .slide-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: transparent;
            background: linear-gradient(45deg, var(--primary), var(--naturales-neon));
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            line-height: 1.2;
            font-family: 'Bangers', cursive;
        }
        
        .slide-text {
            margin-bottom: 30px;
            font-size: 1.2rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .slide-indicators {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }
        
        .indicator {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .indicator.active {
            background-color: var(--primary);
            transform: scale(1.3);
            box-shadow: 0 0 15px var(--primary);
        }
        
        .indicator:hover {
            background-color: var(--naturales-neon);
            transform: scale(1.2);
        }
        
        .info-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 60px auto;
            justify-items: center;
            max-width: 1200px;
            padding: 0 20px;
        }
        
        /* Estilos para ejemplos de cómics */
        .comic-examples {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
            margin-bottom: 40px;
        }
        
        .comic-example-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            width: 200px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .comic-example-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 20px rgba(253, 131, 38, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .comic-example-card h4 {
            margin: 10px 0 5px;
            font-family: 'Bangers', cursive;
            font-size: 1.2rem;
        }
        
        .comic-example-card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* FOOTER REDUCIDO - Solo Materias y Contactos */
        .comic-footer {
            background: rgba(7, 7, 9, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 0 20px;
            margin-top: 60px;
            border-top: 3px solid transparent;
            border-image: linear-gradient(90deg, 
                var(--matematicas-light), 
                var(--lengua-red), 
                var(--sociales-turq), 
                var(--naturales-neon)) 1;
            position: relative;
            overflow: hidden;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
            justify-items: center;
        }
        
        .footer-column {
            text-align: center;
            max-width: 350px;
            width: 100%;
        }
        
        .footer-column h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
            position: relative;
            padding-bottom: 10px;
            font-family: 'Bangers', cursive;
            display: inline-block;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--naturales-neon));
            border-radius: 3px;
        }
        
        .footer-column ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .footer-column li {
            transition: all 0.3s ease;
            width: 100%;
            max-width: 250px;
        }
        
        .footer-column li:hover {
            transform: translateX(5px);
        }
        
        .footer-column a {
            display: inline-block;
            padding: 8px 15px;
            position: relative;
            width: 100%;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .footer-column a:hover {
            background: rgba(253, 131, 38, 0.1);
            color: var(--primary);
        }
        
        .footer-column a::before {
            content: '⚡';
            position: absolute;
            left: -20px;
            opacity: 0;
            transition: all 0.3s ease;
            color: var(--primary);
        }
        
        .footer-column a:hover::before {
            left: -15px;
            opacity: 1;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        .footer-contact-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-contact-info p {
            margin: 8px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .footer-contact-info i {
            color: var(--primary);
            font-size: 1rem;
        }
        
        /* Modal de Login */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: rgba(7, 7, 9, 0.95);
            width: 450px;
            border-radius: 20px;
            padding: 50px;
            position: relative;
            border: 3px solid transparent;
            border-image: linear-gradient(45deg, var(--primary), var(--naturales-neon)) 1;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            animation: modalAppear 0.5s ease;
            transition: all 0.3s ease;
        }
        
        .modal-content:hover {
            transform: translateY(-5px);
        }
        
        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.8) translateY(-50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.8rem;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }
        
        .modal-title {
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-align: center;
            color: transparent;
            background: linear-gradient(45deg, var(--primary), var(--naturales-neon));
            -webkit-background-clip: text;
            background-clip: text;
            font-family: 'Bangers', cursive;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .form-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(253, 131, 38, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* NUEVO EDITOR DE CÓMICS - REEMPLAZANDO EL MODAL ANTERIOR */
        #comicCreatorModal .modal-content {
            width: 95%;
            max-width: 1400px;
            max-height: 95vh;
            overflow: hidden;
            padding: 0;
            background: white;
            border: none;
            border-radius: 20px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
        }
        
        /* NUEVOS ESTILOS PARA EL EDITOR AVANZADO */
        .comic-creator-container {
            width: 100%;
            height: 90vh;
            overflow: hidden;
            border-radius: 20px;
        }
        
        /* Header del editor */
        .editor-header {
            background: linear-gradient(45deg, var(--matematicas-light), var(--lengua-red));
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--primary);
        }
        
        .editor-title {
            font-size: 2.5rem;
            color: white;
            font-family: 'Bangers', cursive;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.3);
        }
        
        .editor-nav {
            display: flex;
            gap: 15px;
        }
        
        .editor-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
            background: rgba(255,255,255,0.9);
            color: #333;
        }
        
        .editor-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            background: white;
        }
        
        .editor-btn.library {
            background: var(--sociales-turq);
            color: white;
        }
        
        .editor-btn.save {
            background: var(--naturales-neon);
            color: #333;
        }
        
        .editor-btn.close {
            background: var(--lengua-red);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .editor-btn.close:hover {
            transform: rotate(90deg);
        }
        
        /* Layout del editor */
        .editor-layout {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 0;
            height: calc(90vh - 80px);
            background: #f8f9fa;
        }
        
        /* Panel de herramientas */
        .tools-panel {
            background: white;
            border-right: 2px solid #dee2e6;
            padding: 20px;
            overflow-y: auto;
            height: 100%;
        }
        
        .tools-panel h3 {
            color: #495057;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            font-family: 'Roboto', sans-serif;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Personajes */
        .characters-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .character-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .character-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .character-item.active {
            border-color: var(--primary);
            background: #FFF9E6;
            transform: scale(1.05);
        }
        
        .character-item.active::after {
            content: '✓';
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .character-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .character-name {
            font-weight: bold;
            color: #495057;
            font-family: 'Roboto', sans-serif;
        }
        
        /* Área del cómic */
        .comic-area {
            background: white;
            padding: 20px;
            overflow-y: auto;
            height: 100%;
            border-right: 2px solid #dee2e6;
        }
        
        /* Viñetas */
        .comic-panel {
            background: white;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.1);
            min-height: 200px;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .panel-number {
            font-weight: bold;
            color: #495057;
            font-size: 1.1rem;
            font-family: 'Bangers', cursive;
            letter-spacing: 1px;
        }
        
        .panel-actions {
            display: flex;
            gap: 10px;
        }
        
        .panel-action-btn {
            background: #6c757d;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .panel-action-btn:hover {
            transform: scale(1.1);
        }
        
        .delete-panel-btn {
            background: var(--lengua-red);
        }
        
        /* Contenido de viñeta */
        .panel-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-height: 150px;
        }
        
        .character-in-panel {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            animation: appear 0.3s ease;
        }
        
        @keyframes appear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .character-in-panel .character-icon {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .remove-character-btn {
            margin-left: auto;
            background: var(--lengua-red);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .remove-character-btn:hover {
            background: #FF5252;
        }
        
        /* Diálogos */
        .dialogue-item {
            background: white;
            border: 2px solid #333;
            border-radius: 20px;
            padding: 12px 15px;
            position: relative;
            margin-bottom: 10px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dialogue-item::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 30px;
            width: 20px;
            height: 20px;
            background: white;
            border-left: 2px solid #333;
            border-top: 2px solid #333;
            transform: rotate(45deg);
        }
        
        .dialogue-text {
            width: 100%;
            border: none;
            outline: none;
            font-size: 1rem;
            font-family: 'Roboto', sans-serif;
            resize: none;
            background: transparent;
            min-height: 50px;
            padding: 5px;
        }
        
        .dialogue-actions {
            display: flex;
            justify-content: flex-end;
            gap: 5px;
            margin-top: 8px;
        }
        
        .dialogue-action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
            background: var(--lengua-red);
            color: white;
        }
        
        .dialogue-action-btn:hover {
            background: #FF5252;
        }
        
        /* Botones para añadir elementos */
        .add-elements {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .add-btn {
            padding: 10px 15px;
            border: 2px dashed #adb5bd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            color: #495057;
            font-family: 'Roboto', sans-serif;
        }
        
        .add-btn:hover {
            border-color: var(--sociales-turq);
            background: #e8f7f6;
            color: var(--sociales-turq);
        }
        
        /* Panel de propiedades */
        .properties-panel {
            background: white;
            padding: 20px;
            overflow-y: auto;
            height: 100%;
        }
        
        .property-group {
            margin-bottom: 20px;
        }
        
        .property-group label {
            display: block;
            margin-bottom: 5px;
            color: #495057;
            font-weight: bold;
            font-family: 'Roboto', sans-serif;
        }
        
        .property-group select,
        .property-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1rem;
            font-family: 'Roboto', sans-serif;
        }
        
        .color-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option.active {
            border-color: #333;
            transform: scale(1.1);
        }
        
        /* Botones de acción */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }
        
        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Roboto', sans-serif;
        }
        
        .add-panel-btn {
            background: var(--sociales-turq);
            color: white;
        }
        
        .add-panel-btn:hover {
            background: #00B4CC;
        }
        
        .save-comic-btn {
            background: var(--naturales-neon);
            color: #333;
        }
        
        .save-comic-btn:hover {
            background: #2AF1C8;
        }
        
        .clear-all-btn {
            background: var(--lengua-red);
            color: white;
        }
        
        .clear-all-btn:hover {
            background: #FF5252;
        }
        
        /* Colores de personajes específicos */
        .profesor { color: var(--matematicas-light); }
        .estudiante { color: var(--lengua-red); }
        .cientifico { color: var(--sociales-turq); }
        .historiador { color: var(--naturales-neon); }
        .deportista { color: var(--cyber-pink); }
        .artista { color: var(--cyber-purple); }
        
        /* Biblioteca dentro del editor */
        .library-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.98);
            z-index: 10;
            padding: 30px;
            overflow-y: auto;
            display: none;
        }
        
        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--sociales-turq);
        }
        
        .library-title {
            font-size: 2rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'Bangers', cursive;
        }
        
        .close-library-btn {
            background: var(--lengua-red);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-library-btn:hover {
            background: #FF5252;
            transform: rotate(90deg);
        }
        
        /* Grid de cómics */
        .comics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .comic-card-editor {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .comic-card-editor:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            border-color: var(--sociales-turq);
        }
        
        .comic-preview {
            height: 150px;
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            border: 2px dashed #dee2e6;
        }
        
        .comic-info {
            padding: 10px 0;
        }
        
        .comic-title-editor {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-family: 'Roboto', sans-serif;
        }
        
        .comic-meta {
            display: flex;
            justify-content: space-between;
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .comic-subject {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            font-family: 'Roboto', sans-serif;
        }
        
        .subject-matematicas { background: var(--matematicas-light); color: white; }
        .subject-ciencias { background: var(--sociales-turq); color: white; }
        .subject-sociales { background: var(--naturales-neon); color: #333; }
        .subject-lengua { background: var(--lengua-red); color: white; }
        .subject-arte { background: var(--cyber-purple); color: white; }
        
        .comic-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .card-action-btn {
            flex: 1;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
        }
        
        .load-btn {
            background: var(--sociales-turq);
            color: white;
        }
        
        .load-btn:hover {
            background: #00B4CC;
        }
        
        .delete-btn {
            background: var(--lengua-red);
            color: white;
        }
        
        .delete-btn:hover {
            background: #FF5252;
        }
        
        /* Filtros */
        .library-filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-family: 'Roboto', sans-serif;
        }
        
        .filter-btn:hover,
        .filter-btn.active {
            background: var(--sociales-turq);
            border-color: var(--sociales-turq);
            color: white;
        }
        
        .search-box {
            flex: 1;
            min-width: 200px;
            padding: 10px 20px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
        }
        
        .search-box:focus {
            border-color: var(--sociales-turq);
            box-shadow: 0 0 0 3px rgba(0, 166, 192, 0.2);
        }
        
        /* Mensaje sin cómics */
        .empty-library {
            text-align: center;
            padding: 60px;
            color: #6c757d;
        }
        
        .empty-library i {
            font-size: 5rem;
            margin-bottom: 20px;
            color: #dee2e6;
        }
        
        /* Estilos para tus cómics */
        .my-comics-section {
            margin-top: 40px;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border: 2px solid var(--primary);
        }
        
        .my-comics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .my-comic-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            border-left: 5px solid var(--primary);
        }
        
        .my-comic-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .my-comic-card p {
            font-size: 0.9rem;
            margin: 5px 0;
        }
        
        .comic-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        
        /* Botón mis cómics */
        .btn-my-comics {
            background: linear-gradient(45deg, var(--sociales-turq), var(--matematicas-light));
            margin-left: 10px;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .slide-content {
                left: 50px;
                max-width: 500px;
            }
            .slide-title {
                font-size: 3rem;
            }
            .info-highlights {
                max-width: 900px;
            }
        }
        
        @media (max-width: 992px) {
            .main-header {
                flex-direction: column;
                gap: 25px;
            }
            .search-bar {
                width: 100%;
                max-width: 500px;
            }
            .nav-list {
                flex-wrap: wrap;
                justify-content: center;
            }
            .slide-content {
                left: 30px;
                right: 30px;
                max-width: none;
                padding: 30px;
            }
            .slide-title {
                font-size: 2.5rem;
            }
            .hero {
                height: 500px;
            }
            .main-content {
                margin-top: 200px;
            }
            .info-highlights {
                max-width: 700px;
                grid-template-columns: repeat(2, 1fr);
            }
            .footer-content {
                grid-template-columns: 1fr;
                max-width: 600px;
                margin: 0 auto 30px;
            }
        }
        
        @media (max-width: 768px) {
            .hero {
                height: 400px;
            }
            .slide-content {
                bottom: 80px;
                padding: 25px;
            }
            .slide-title {
                font-size: 2rem;
            }
            .section-title {
                font-size: 2.2rem;
            }
            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            .modal-content {
                width: 90%;
                padding: 40px 30px;
            }
            .info-highlights {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                max-width: 90%;
            }
            .comic-card {
                max-width: 100%;
            }
            .comic-header.hidden {
                transform: translateY(-150px);
            }
            .footer-column {
                max-width: 100%;
            }
            .footer-column ul {
                align-items: flex-start;
                padding-left: 20px;
            }
        }
        
        @media (max-width: 576px) {
            .logo {
                font-size: 2.2rem;
            }
            .user-actions {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            .user-actions a {
                margin: 0;
            }
            .nav-list a {
                padding: 15px;
                font-size: 0.9rem;
            }
            .hero {
                height: 350px;
            }
            .slide-content {
                bottom: 60px;
                padding: 20px;
            }
            .slide-title {
                font-size: 1.8rem;
            }
            .main-content {
                margin-top: 140px;
            }
            .info-highlights {
                grid-template-columns: 1fr;
                max-width: 95%;
            }
            .footer-content {
                padding: 0 15px;
            }
            .footer-column ul {
                padding-left: 10px;
            }
        }
        
        /* Responsive para el editor */
        @media (max-width: 1200px) {
            .editor-layout {
                grid-template-columns: 250px 1fr;
            }
            .properties-panel {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .editor-layout {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .editor-title {
                font-size: 1.8rem;
            }
            
            .comics-grid {
                grid-template-columns: 1fr;
            }
            
            .editor-nav {
                flex-direction: column;
            }
            
            .characters-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            #comicCreatorModal .modal-content {
                height: 95vh;
            }
            
            .comic-creator-container {
                height: 90vh;
            }
        }
        
        @media (max-width: 480px) {
            .editor-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .library-filters {
                flex-direction: column;
            }
            
            .characters-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .editor-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Partículas flotantes -->
    <div class="floating-particles" id="particles"></div>
    
    <!-- Líneas de movimiento cómic -->
    <div class="motion-line" style="width: 200px; height: 5px; top: 200px; left: 10%;"></div>
    <div class="motion-line" style="width: 150px; height: 5px; top: 400px; right: 15%;"></div>
    
    <!-- Zona de detección del mouse para mostrar header -->
    <div class="mouse-detection-zone" id="mouseDetectionZone"></div>
    
    <!-- Header completo -->
    <header class="comic-header visible" id="mainHeader">
        <div class="container main-header">
            <a href="#inicio" class="logo nav-link" data-section="inicio">EDU<span>CÓMIC</span></a>
            
            <div class="search-bar hover-float">
                <input type="text" placeholder="Buscar contenido educativo...">
                <button><i class="fas fa-search"></i></button>
            </div>
            
            <div class="user-actions">
                <div class="user-welcome" id="userWelcome">
                    <i class="fas fa-user-graduate"></i>
                    <span id="usernameDisplay">Estudiante</span>
                    <button class="logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
                <a href="#" class="sign-in hover-float" id="signInBtn"><i class="fas fa-user"></i> Iniciar Sesión</a>
                <button class="btn btn-comic-creator hover-float" id="comicCreatorBtn">
                    <i class="fas fa-pencil-alt"></i> CREAR CÓMIC
                </button>
                <!-- NUEVO BOTÓN AÑADIDO -->
                <button class="btn btn-my-comics hover-float" id="myComicsBtn" style="display: none;">
                    <i class="fas fa-book"></i> MIS CÓMICS
                </button>
            </div>
        </div>
        
        <nav class="comic-nav">
            <div class="container">
                <ul class="nav-list">
                    <li><a href="#inicio" class="hover-float nav-link" data-section="inicio"><i class="fas fa-home"></i> INICIO</a></li>
                    <li class="dropdown">
                        <a href="#matematicas" class="hover-float nav-link nav-matematicas" data-section="matematicas"><i class="fas fa-calculator"></i> MATEMÁTICAS <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#matematicas/estadisticas" class="nav-link" data-section="matematicas"><i class="fas fa-chart-bar"></i> Estadísticas</a></li>
                            <li><a href="#matematicas/geometria" class="nav-link" data-section="matematicas"><i class="fas fa-shapes"></i> Geometría</a></li>
                            <li><a href="#matematicas/algebra" class="nav-link" data-section="matematicas"><i class="fas fa-superscript"></i> Álgebra</a></li>
                            <li><a href="#matematicas/aritmetica" class="nav-link" data-section="matematicas"><i class="fas fa-calculator"></i> Aritmética</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#lengua" class="hover-float nav-link nav-lengua" data-section="lengua"><i class="fas fa-book-open"></i> LENGUA <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#lengua/escritura" class="nav-link" data-section="lengua"><i class="fas fa-pen-fancy"></i> Escritura Creativa</a></li>
                            <li><a href="#lengua/lectura" class="nav-link" data-section="lengua"><i class="fas fa-book-reader"></i> Lectura</a></li>
                            <li><a href="#lengua/gramatica" class="nav-link" data-section="lengua"><i class="fas fa-spell-check"></i> Gramática</a></li>
                            <li><a href="#lengua/concurso" class="nav-link" data-section="lengua"><i class="fas fa-trophy"></i> Concurso Literario</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#sociales" class="hover-float nav-link nav-sociales" data-section="sociales"><i class="fas fa-globe-americas"></i> SOCIALES <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#sociales/historia" class="nav-link" data-section="sociales"><i class="fas fa-landmark"></i> Historia</a></li>
                            <li><a href="#sociales/cultura" class="nav-link" data-section="sociales"><i class="fas fa-theater-masks"></i> Cultura</a></li>
                            <li><a href="#sociales/valores" class="nav-link" data-section="sociales"><i class="fas fa-handshake"></i> Valores</a></li>
                            <li><a href="#sociales/mapa" class="nav-link" data-section="sociales"><i class="fas fa-map-marked-alt"></i> Mapa Interactivo</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#naturales" class="hover-float nav-link nav-naturales" data-section="naturales"><i class="fas fa-leaf"></i> NATURALES <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#naturales/ecologia" class="nav-link" data-section="naturales"><i class="fas fa-recycle"></i> Ecología</a></li>
                            <li><a href="#naturales/cuerpo" class="nav-link" data-section="naturales"><i class="fas fa-heartbeat"></i> Cuerpo Humano</a></li>
                            <li><a href="#naturales/experimentos" class="nav-link" data-section="naturales"><i class="fas fa-flask"></i> Experimentos</a></li>
                            <li><a href="#naturales/energia" class="nav-link" data-section="naturales"><i class="fas fa-solar-panel"></i> Energías</a></li>
                        </ul>
                    </li>
                    <li><a href="#galeria" class="hover-float nav-link" data-section="galeria"><i class="fas fa-images"></i> GALERÍA</a></li>
                    <li><a href="#ranking" class="hover-float nav-link" data-section="ranking"><i class="fas fa-trophy"></i> RANKING</a></li>
                </ul>
            </div>
        </nav>
    </header>
    
    <!-- Contenido Dinámico -->
    <main class="main-content container" id="contentContainer">
        <!-- Sección de Inicio -->
        <section id="inicio" class="content-section active"></section>
        
        <!-- Sección de Matemáticas -->
        <section id="matematicas" class="content-section"></section>
        
        <!-- Sección de Lengua -->
        <section id="lengua" class="content-section"></section>
        
        <!-- Sección de Ciencias Sociales -->
        <section id="sociales" class="content-section"></section>
        
        <!-- Sección de Ciencias Naturales -->
        <section id="naturales" class="content-section"></section>
        
        <!-- Sección de Galería -->
        <section id="galeria" class="content-section"></section>
        
        <!-- Sección de Ranking -->
        <section id="ranking" class="content-section"></section>
        
        <!-- NUEVA SECCIÓN: Mis Cómics -->
        <section id="mis-comics" class="content-section"></section>
    </main>
    
    <!-- Footer Reducido - Solo Materias y Contactos -->
    <footer class="comic-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>MATERIAS</h3>
                    <ul>
                        <li><a href="#matematicas" class="nav-link" data-section="matematicas"><i class="fas fa-calculator"></i> Matemáticas</a></li>
                        <li><a href="#lengua" class="nav-link" data-section="lengua"><i class="fas fa-book-open"></i> Lengua Española</a></li>
                        <li><a href="#sociales" class="nav-link" data-section="sociales"><i class="fas fa-globe-americas"></i> Ciencias Sociales</a></li>
                        <li><a href="#naturales" class="nav-link" data-section="naturales"><i class="fas fa-leaf"></i> Ciencias Naturales</a></li>
                        <li><a href="#galeria" class="nav-link" data-section="galeria"><i class="fas fa-images"></i> Galería de Cómics</a></li>
                        <li><a href="#ranking" class="nav-link" data-section="ranking"><i class="fas fa-trophy"></i> Ranking Estudiantil</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>CONTACTO</h3>
                    <ul>
                        <li><a href="#" class="social-link"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                        <li><a href="#" class="social-link"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#" class="social-link"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="#" class="social-link"><i class="fab fa-youtube"></i> YouTube</a></li>
                    </ul>
                    <div class="footer-contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> Portal Educativo Digital</p>
                        <p><i class="fas fa-envelope"></i> info@educomic.org</p>
                        <p><i class="fas fa-phone"></i> +34 123 456 789</p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>EDUCÓMIC™ & © 2024 Portal Educativo Digital. Todos los derechos reservados.</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">
                    <a href="#" style="color: var(--primary);">Política de Privacidad</a> | 
                    <a href="#" style="color: var(--primary);">Términos de Uso</a> | 
                    <a href="#" style="color: var(--primary);">Mapa del Sitio</a>
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Modal de Login -->
    <div class="modal" id="loginModal">
        <div class="modal-content hover-float">
            <span class="modal-close" id="closeModal">&times;</span>
            <h2 class="modal-title">ACCESO AL PORTAL</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Correo Electrónico</label>
                    <input type="email" id="email" placeholder="estudiante@educomic.org" required>
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-key"></i> Contraseña</label>
                    <input type="password" id="password" placeholder="Tu contraseña" required>
                </div>
                <div class="form-group">
                    <label for="username"><i class="fas fa-user"></i> Nombre de Usuario</label>
                    <input type="text" id="username" placeholder="Como te llamaremos" required>
                </div>
                <button type="submit" class="btn hover-float" style="width: 100%;">
                    <i class="fas fa-rocket"></i> Acceder al Portal
                </button>
                <div style="text-align: center; margin-top: 25px;">
                    <a href="#" id="forgotPassword"><i class="fas fa-question-circle"></i> ¿Olvidaste tu contraseña?</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- NUEVO MODAL CON EL EDITOR AVANZADO DE CÓMICS -->
    <div class="modal" id="comicCreatorModal">
        <div class="modal-content" style="background: transparent; border: none; box-shadow: none; padding: 0;">
            <div class="comic-creator-container">
                <!-- Header del Editor -->
                <div class="editor-header">
                    <h1 class="editor-title">
                        <i class="fas fa-pencil-alt"></i>
                        Creador de Cómics Educativos
                    </h1>
                    <div class="editor-nav">
                        <button class="editor-btn library" onclick="showLibrary()">
                            <i class="fas fa-book"></i> Mis Cómics
                        </button>
                        <button class="editor-btn save" onclick="saveComicToGallery()">
                            <i class="fas fa-save"></i> Guardar
                        </button>
                        <button class="editor-btn close" onclick="closeComicCreator()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Layout del Editor -->
                <div class="editor-layout">
                    <!-- Panel de Herramientas -->
                    <div class="tools-panel">
                        <h3>
                            <i class="fas fa-user-friends"></i> Personajes
                            <span id="selectedCharacterName" style="font-size: 0.9rem; color: var(--lengua-red); font-weight: normal; margin-left: auto;"></span>
                        </h3>
                        <div class="characters-grid" id="charactersGrid">
                            <!-- Los personajes se generarán con JavaScript -->
                        </div>
                        
                        <div class="add-elements">
                            <button class="add-btn" onclick="addDialogueToPanel()">
                                <i class="fas fa-comment"></i> Añadir Diálogo
                            </button>
                            <button class="add-btn" onclick="addSelectedCharacter()">
                                <i class="fas fa-user-plus"></i> Añadir Personaje
                            </button>
                        </div>
                        
                        <h3 style="margin-top: 30px;"><i class="fas fa-tools"></i> Herramientas</h3>
                        <div class="add-elements">
                            <button class="add-btn" onclick="addNewPanel()">
                                <i class="fas fa-plus-square"></i> Nueva Viñeta
                            </button>
                            <button class="add-btn" onclick="clearCurrentPanel()">
                                <i class="fas fa-trash"></i> Limpiar Viñeta Actual
                            </button>
                        </div>
                    </div>
                    
                    <!-- Área del Cómic -->
                    <div class="comic-area" id="comicArea">
                        <div class="comic-panel" id="panel-1" data-panel="1">
                            <div class="panel-header">
                                <div class="panel-number">Viñeta 1</div>
                                <div class="panel-actions">
                                    <button class="panel-action-btn delete-panel-btn" onclick="deletePanel(1)" title="Eliminar viñeta">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="panel-content" id="panel-content-1">
                                <!-- Personajes y diálogos se añadirán aquí -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Panel de Propiedades -->
                    <div class="properties-panel">
                        <h3><i class="fas fa-sliders-h"></i> Propiedades</h3>
                        
                        <div class="property-group">
                            <label>Título del Cómic</label>
                            <input type="text" id="comicTitle" placeholder="Mi cómic educativo" value="Mi Aventura Educativa">
                        </div>
                        
                        <div class="property-group">
                            <label>Materia Educativa</label>
                            <select id="subjectSelect">
                                <option value="matematicas">Matemáticas</option>
                                <option value="ciencias">Ciencias Naturales</option>
                                <option value="sociales">Ciencias Sociales</option>
                                <option value="lengua">Lengua Española</option>
                                <option value="arte">Arte y Cultura</option>
                            </select>
                        </div>
                        
                        <div class="property-group">
                            <label>Color del Borde</label>
                            <div class="color-options">
                                <div class="color-option active" style="background: #333;" data-color="#333" onclick="changeBorderColor(this)"></div>
                                <div class="color-option" style="background: var(--matematicas-light);" data-color="var(--matematicas-light)" onclick="changeBorderColor(this)"></div>
                                <div class="color-option" style="background: var(--lengua-red);" data-color="var(--lengua-red)" onclick="changeBorderColor(this)"></div>
                                <div class="color-option" style="background: var(--sociales-turq);" data-color="var(--sociales-turq)" onclick="changeBorderColor(this)"></div>
                                <div class="color-option" style="background: var(--naturales-neon);" data-color="var(--naturales-neon)" onclick="changeBorderColor(this)"></div>
                            </div>
                        </div>
                        
                        <div class="property-group">
                            <label>Fondo de Viñetas</label>
                            <div class="color-options">
                                <div class="color-option active" style="background: white; border: 1px solid #dee2e6;" data-bgcolor="white" onclick="changeBackgroundColor(this)"></div>
                                <div class="color-option" style="background: #f8f9fa; border: 1px solid #dee2e6;" data-bgcolor="#f8f9fa" onclick="changeBackgroundColor(this)"></div>
                                <div class="color-option" style="background: #e8f7f6; border: 1px solid #dee2e6;" data-bgcolor="#e8f7f6" onclick="changeBackgroundColor(this)"></div>
                                <div class="color-option" style="background: #fff9e6; border: 1px solid #dee2e6;" data-bgcolor="#fff9e6" onclick="changeBackgroundColor(this)"></div>
                                <div class="color-option" style="background: #fce4ec; border: 1px solid #dee2e6;" data-bgcolor="#fce4ec" onclick="changeBackgroundColor(this)"></div>
                            </div>
                        </div>
                        
                        <button class="action-btn save-comic-btn" onclick="saveComicToGallery()" style="width: 100%; margin-top: 20px;">
                            <i class="fas fa-save"></i> Guardar Cómic
                        </button>
                    </div>
                    
                    <!-- Biblioteca -->
                    <div class="library-container" id="libraryContainer">
                        <div class="library-header">
                            <h2 class="library-title">
                                <i class="fas fa-book-open"></i>
                                Mis Cómics Guardados
                            </h2>
                            <button class="close-library-btn" onclick="hideLibrary()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <!-- Filtros -->
                        <div class="library-filters">
                            <input type="text" class="search-box" id="searchBox" placeholder="Buscar cómics..." oninput="filterComics()">
                            <button class="filter-btn active" data-filter="all" onclick="setFilter('all')">Todos</button>
                            <button class="filter-btn" data-filter="matematicas" onclick="setFilter('matematicas')">Matemáticas</button>
                            <button class="filter-btn" data-filter="ciencias" onclick="setFilter('ciencias')">Ciencias</button>
                            <button class="filter-btn" data-filter="sociales" onclick="setFilter('sociales')">Sociales</button>
                            <button class="filter-btn" data-filter="lengua" onclick="setFilter('lengua')">Lengua</button>
                            <button class="filter-btn" data-filter="arte" onclick="setFilter('arte')">Arte</button>
                        </div>
                        
                        <!-- Grid de Cómics -->
                        <div class="comics-grid" id="comicsGrid">
                            <!-- Se llenará con JavaScript -->
                        </div>
                        
                        <!-- Mensaje si no hay cómics -->
                        <div id="emptyLibraryMessage" class="empty-library" style="display: none;">
                            <i class="fas fa-book"></i>
                            <h2>No hay cómics guardados</h2>
                            <p style="margin: 15px 0 25px;">Crea tu primer cómic educativo usando el editor</p>
                            <button class="editor-btn" onclick="hideLibrary()" style="background: var(--sociales-turq); color: white;">
                                <i class="fas fa-pencil-alt"></i> Crear Nuevo Cómic
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Botones de Acción -->
                <div class="action-buttons">
                    <button class="action-btn add-panel-btn" onclick="addNewPanel()">
                        <i class="fas fa-plus"></i> Añadir Viñeta
                    </button>
                    <button class="action-btn save-comic-btn" onclick="saveComicToGallery()">
                        <i class="fas fa-save"></i> Guardar Cómic
                    </button>
                    <button class="action-btn clear-all-btn" onclick="clearAllPanels()">
                        <i class="fas fa-trash-alt"></i> Limpiar Todo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Templates para contenido dinámico -->
    <template id="inicio-template">
        <div class="hero">
            <div class="hero-slider">
                <div class="slide active" style="background-image: linear-gradient(rgba(7,7,9,0.7), rgba(7,7,9,0.7)), url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80')">
                    <div class="slide-content hover-float">
                        <h2 class="slide-title">¡APRENDE CON CÓMICS!</h2>
                        <p class="slide-text">Descubre las 4 materias básicas a través de historias interactivas, personajes fascinantes y mucho más. ¡La educación nunca fue tan divertida!</p>
                        <button class="btn" id="startLearningBtn"><i class="fas fa-play"></i> Comenzar Aprendizaje</button>
                    </div>
                </div>
                
                <div class="slide" style="background-image: linear-gradient(rgba(7,7,9,0.7), rgba(7,7,9,0.7)), url('https://images.unsplash.com/photo-1581276879432-15e50529f34b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80')">
                    <div class="slide-content hover-float">
                        <h2 class="slide-title">CREA TU PROPIO CÓMIC</h2>
                        <p class="slide-text">Con nuestro creador de cómics educativo, puedes hacer tus propias historias sobre matemáticas, lengua, ciencias sociales y naturales.</p>
                        <button class="btn btn-comic-creator" id="openCreatorFromSlide"><i class="fas fa-pencil-alt"></i> Crear Cómic Educativo</button>
                    </div>
                </div>
                
                <div class="slide" style="background-image: linear-gradient(rgba(7,7,9,0.7), rgba(7,7,9,0.7)), url('https://images.unsplash.com/photo-1542744094-3a31f272c490?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80')">
                    <div class="slide-content hover-float">
                        <h2 class="slide-title">RANKING Y LOGROS</h2>
                        <p class="slide-text">Participa en concursos, gana puntos por tus creaciones y compite con otros estudiantes. ¡Tu esfuerzo tiene recompensa!</p>
                        <a href="#ranking" class="btn nav-link" data-section="ranking"><i class="fas fa-trophy"></i> Ver Ranking</a>
                    </div>
                </div>
                
                <div class="slide-indicators">
                    <div class="indicator active" data-slide="0"></div>
                    <div class="indicator" data-slide="1"></div>
                    <div class="indicator" data-slide="2"></div>
                </div>
            </div>
        </div>
        
        <div class="info-highlights">
            <div class="comic-card matematicas-card hover-float">
                <i class="fas fa-calculator"></i>
                <h3>Matemáticas</h3>
                <p>Aprende matemáticas con gráficas interactivas, estadísticas en tiempo real y problemas resueltos como cómics. ¡Las matemáticas nunca fueron tan divertidas!</p>
                <a href="#matematicas" class="btn nav-link" data-section="matematicas" style="margin-top: 15px; display: inline-block; background: var(--matematicas-light); border-color: var(--matematicas-light);">Explorar Matemáticas</a>
            </div>
            
            <div class="comic-card lengua-card hover-float">
                <i class="fas fa-book-open"></i>
                <h3>Lengua Española</h3>
                <p>Escribe tus propias historias, mejora tu ortografía y participa en concursos literarios. ¡Conviértete en un gran escritor de cómics educativos!</p>
                <a href="#lengua" class="btn nav-link" data-section="lengua" style="margin-top: 15px; display: inline-block; background: var(--lengua-red); border-color: var(--lengua-red);">Explorar Lengua</a>
            </div>
            
            <div class="comic-card sociales-card hover-float">
                <i class="fas fa-globe-americas"></i>
                <h3>Ciencias Sociales</h3>
                <p>Descubre la historia, cultura y valores a través de cómics interactivos. Explora mapas y conoce personajes históricos importantes.</p>
                <a href="#sociales" class="btn nav-link" data-section="sociales" style="margin-top: 15px; display: inline-block; background: var(--sociales-turq); border-color: var(--sociales-turq);">Explorar Sociales</a>
            </div>
            
            <div class="comic-card naturales-card hover-float">
                <i class="fas fa-leaf"></i>
                <h3>Ciencias Naturales</h3>
                <p>Aprende sobre ecología, el cuerpo humano y experimentos científicos mediante cómics educativos. ¡Cuida el planeta mientras aprendes!</p>
                <a href="#naturales" class="btn nav-link" data-section="naturales" style="margin-top: 15px; display: inline-block; background: var(--naturales-neon); border-color: var(--naturales-neon);">Explorar Naturales</a>
            </div>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 40px auto;">
            <h3 style="text-align: center; color: black; margin-bottom: 15px;">¡Novedad!</h3>
            <p style="color: black; text-align: center;">Concurso de cómics educativos: Crea tu propio cómic sobre cualquiera de las 4 materias básicas y gana premios increíbles. ¡Participa ahora!</p>
            <button class="btn" id="participateContestBtn" style="display: block; margin: 15px auto 0; background: var(--sociales-complement-purple);">Participar en Concurso</button>
        </div>
    </template>
    
    <template id="matematicas-template">
        <h2 class="section-title section-title-matematicas hover-float">🧮 MATEMÁTICAS</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px; color: var(--matematicas-light);">Aprende matemáticas mediante estadísticas, gráficas y problemas interactivos presentados en formato cómic.</p>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 0 auto 40px; border-color: var(--matematicas-light);">
            <h3 style="color: var(--matematicas-navy); text-align: center;">¡Las matemáticas en acción!</h3>
            <p style="color: black;">Usa fórmulas para calcular promedios, crear rankings y analizar datos de forma divertida. Convierte problemas complejos en cómics comprensibles.</p>
        </div>
        
        <div class="card-grid">
            <div class="comic-card matematicas-card hover-float">
                <i class="fas fa-chart-bar"></i>
                <h3>Estadísticas en Tiempo Real</h3>
                <p><strong>Promedios:</strong> Calcula la media de calificaciones de los cómics creados por los usuarios.</p>
                <p><strong>Rankings:</strong> Sistema de puntuación según popularidad y calidad.</p>
                <p><strong>Porcentajes:</strong> Análisis de participación estudiantil.</p>
                <button class="btn showMathExampleBtn" data-type="estadisticas" style="margin-top: 15px; width: 100%; background: var(--matematicas-light); border-color: var(--matematicas-light);">Ver Ejemplo</button>
            </div>
            
            <div class="comic-card matematicas-card hover-float">
                <i class="fas fa-shapes"></i>
                <h3>Geometría con Cómics</h3>
                <p>Aprende formas geométricas a través de historias visuales. Desde triángulos hasta esferas, todo en formato cómic.</p>
                <div id="geometriaChart" style="height: 150px; background: var(--matematicas-navy); border-radius: 10px; margin: 15px 0; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-drafting-compass" style="font-size: 4rem; color: var(--matematicas-light);"></i>
                </div>
                <button class="btn showMathExampleBtn" data-type="geometria" style="margin-top: 15px; width: 100%; background: var(--matematicas-light); border-color: var(--matematicas-light);">Explorar Geometría</button>
            </div>
            
            <div class="comic-card matematicas-card hover-float">
                <i class="fas fa-superscript"></i>
                <h3>Álgebra Visual</h3>
                <p>Resuelve ecuaciones y problemas algebraicos mediante cómics paso a paso. Aprende de forma visual y divertida.</p>
                <div style="background: var(--matematicas-navy); padding: 15px; border-radius: 10px; margin: 15px 0; font-family: monospace;">
                    <p style="color: var(--matematicas-light); margin: 0;">2x + 5 = 15</p>
                    <p style="color: var(--matematicas-light); margin: 5px 0;">2x = 10</p>
                    <p style="color: var(--matematicas-light); margin: 0;">x = 5</p>
                </div>
                <button class="btn showMathExampleBtn" data-type="algebra" style="margin-top: 15px; width: 100%; background: var(--matematicas-light); border-color: var(--matematicas-light);">Resolver Problemas</button>
            </div>
        </div>
        
        <div style="margin-top: 40px;">
            <h3 style="text-align: center; color: var(--matematicas-light); margin-bottom: 20px; font-family: 'Bangers', cursive; font-size: 1.8rem;">Ejemplos de Cómics de Matemáticas</h3>
            <div class="comic-examples">
                <div class="comic-example-card" onclick="showExampleComic('matematicas1')">
                    <i class="fas fa-calculator" style="font-size: 2rem; color: var(--matematicas-light); margin-bottom: 10px;"></i>
                    <h4>El Misterio del Triángulo</h4>
                    <p>Aprende el Teorema de Pitágoras</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('matematicas2')">
                    <i class="fas fa-superscript" style="font-size: 2rem; color: var(--matematicas-light); margin-bottom: 10px;"></i>
                    <h4>El Gran Desafío Algebraico</h4>
                    <p>Resolución de ecuaciones</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('matematicas3')">
                    <i class="fas fa-chart-pie" style="font-size: 2rem; color: var(--matematicas-light); margin-bottom: 10px;"></i>
                    <h4>Estadísticas Divertidas</h4>
                    <p>Aprende sobre porcentajes</p>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px;">
            <h3 style="text-align: center; color: var(--matematicas-light); margin-bottom: 30px; font-family: 'Bangers', cursive; font-size: 2rem;">Personajes Matemáticos Famosos</h3>
            <div class="character-grid">
                <div class="character-card">
                    <div style="height: 200px; background: var(--matematicas-navy); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-calculator" style="font-size: 5rem; color: var(--matematicas-light);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Pitágoras</h4>
                        <p class="character-description">Matemático griego famoso por su teorema sobre los triángulos rectángulos. Revolucionó las matemáticas y la filosofía.</p>
                        <button class="btn showCharacterInfoBtn" data-character="pitagoras" style="background: var(--matematicas-light); border-color: var(--matematicas-light); margin-top: 10px; width: 100%;">Ver Cómic</button>
                    </div>
                </div>
                
                <div class="character-card">
                    <div style="height: 200px; background: var(--matematicas-navy); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-laptop-code" style="font-size: 5rem; color: var(--matematicas-light);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Ada Lovelace</h4>
                        <p class="character-description">Primera programadora de la historia. Colaboró con Charles Babbage y sentó las bases de la computación moderna.</p>
                        <button class="btn showCharacterInfoBtn" data-character="ada" style="background: var(--matematicas-light); border-color: var(--matematicas-light); margin-top: 10px; width: 100%;">Ver Cómic</button>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="lengua-template">
        <h2 class="section-title section-title-lengua hover-float">📚 LENGUA ESPAÑOLA</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px; color: var(--lengua-red);">Desarrolla tus habilidades de escritura y lectura a través de cómics creativos, concursos literarios y ejercicios interactivos.</p>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 0 auto 40px; border-color: var(--lengua-red);">
            <h3 style="color: var(--lengua-deep-red); text-align: center;">¡Escribe tu propia historia!</h3>
            <p style="color: black;">Publica tus textos, mejora tu ortografía y participa en concursos literarios. Convierte tus ideas en cómics fascinantes.</p>
        </div>
        
        <div class="card-grid">
            <div class="comic-card lengua-card hover-float">
                <i class="fas fa-pen-fancy"></i>
                <h3>Escritura Creativa</h3>
                <p><strong>Publica:</strong> Comparte tus historias cortas, poemas y reflexiones.</p>
                <p><strong>Recibe feedback:</strong> Obtén comentarios de otros estudiantes y profesores.</p>
                <p><strong>Mejora:</strong> Usa nuestras herramientas de corrección ortográfica.</p>
                <button class="btn" id="startWritingBtn" style="margin-top: 15px; width: 100%; background: var(--lengua-red); border-color: var(--lengua-red);">Comenzar a Escribir</button>
            </div>
            
            <div class="comic-card lengua-card hover-float">
                <i class="fas fa-book-reader"></i>
                <h3>Club de Lectura</h3>
                <p>Únete a nuestro club de lectura digital y discute libros con otros estudiantes. Cada mes, un nuevo libro en formato cómic.</p>
                <div id="readingProgress" style="height: 10px; background: var(--lengua-deep-red); border-radius: 5px; margin: 15px 0; overflow: hidden;">
                    <div style="width: 75%; height: 100%; background: var(--lengua-red);"></div>
                </div>
                <p style="font-size: 0.9rem; color: var(--lengua-red);">Progreso del libro del mes: 75%</p>
                <button class="btn" id="joinBookClubBtn" style="margin-top: 15px; width: 100%; background: var(--lengua-red); border-color: var(--lengua-red);">Unirse al Club</button>
            </div>
            
            <div class="comic-card lengua-card hover-float">
                <i class="fas fa-trophy"></i>
                <h3>Concurso Literario</h3>
                <p>Participa en nuestro concurso mensual de cómics literarios. Temas variados, premios increíbles y reconocimiento en la comunidad.</p>
                <div style="background: var(--lengua-deep-red); padding: 15px; border-radius: 10px; margin: 15px 0;">
                    <p style="color: var(--lengua-red); margin: 0; font-weight: bold;">Tema actual:</p>
                    <p style="color: white; margin: 5px 0 0;">"Una aventura en el espacio"</p>
                </div>
                <button class="btn" id="enterContestBtn" style="margin-top: 15px; width: 100%; background: var(--lengua-red); border-color: var(--lengua-red);">Participar en Concurso</button>
            </div>
        </div>
        
        <div style="margin-top: 40px;">
            <h3 style="text-align: center; color: var(--lengua-red); margin-bottom: 20px; font-family: 'Bangers', cursive; font-size: 1.8rem;">Ejemplos de Cómics de Lengua</h3>
            <div class="comic-examples">
                <div class="comic-example-card" onclick="showExampleComic('lengua1')">
                    <i class="fas fa-keyboard" style="font-size: 2rem; color: var(--lengua-red); margin-bottom: 10px;"></i>
                    <h4>Las Aventuras del Punto y la Coma</h4>
                    <p>Aprende sobre puntuación</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('lengua2')">
                    <i class="fas fa-pen-nib" style="font-size: 2rem; color: var(--lengua-red); margin-bottom: 10px;"></i>
                    <h4>El Concurso de Poesía</h4>
                    <p>Escritura creativa</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('lengua3')">
                    <i class="fas fa-book" style="font-size: 2rem; color: var(--lengua-red); margin-bottom: 10px;"></i>
                    <h4>Los Secretos de la Ortografía</h4>
                    <p>Reglas ortográficas</p>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px;">
            <h3 style="text-align: center; color: var(--lengua-red); margin-bottom: 30px; font-family: 'Bangers', cursive; font-size: 2rem;">Grandes Escritores</h3>
            <div class="character-grid">
                <div class="character-card">
                    <div style="height: 200px; background: var(--lengua-deep-red); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-book" style="font-size: 5rem; color: var(--lengua-red);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Miguel de Cervantes</h4>
                        <p class="character-description">Autor de "Don Quijote de la Mancha", considerada la primera novela moderna y una de las mejores obras de la literatura universal.</p>
                        <button class="btn showCharacterInfoBtn" data-character="cervantes" style="background: var(--lengua-red); border-color: var(--lengua-red); margin-top: 10px; width: 100%;">Leer Cómic</button>
                    </div>
                </div>
                
                <div class="character-card">
                    <div style="height: 200px; background: var(--lengua-deep-red); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-magic" style="font-size: 5rem; color: var(--lengua-red);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Gabriel García Márquez</h4>
                        <p class="character-description">Escritor colombiano, ganador del Nobel de Literatura en 1982, autor de "Cien años de soledad" y máximo exponente del realismo mágico.</p>
                        <button class="btn showCharacterInfoBtn" data-character="garcia-marquez" style="background: var(--lengua-red); border-color: var(--lengua-red); margin-top: 10px; width: 100%;">Leer Cómic</button>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="sociales-template">
        <h2 class="section-title section-title-sociales hover-float">🌎 CIENCIAS SOCIALES</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px; color: var(--sociales-turq);">Explora la historia, cultura, valores y geografía a través de cómics interactivos y mapas digitales.</p>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 0 auto 40px; border-color: var(--sociales-turq);">
            <h3 style="color: var(--sociales-blue); text-align: center;">¡Conoce tu mundo!</h3>
            <p style="color: black;">Aprende sobre culturas, eventos históricos importantes y valores sociales mediante cómics educativos. Explora mapas interactivos y descubre nuevas perspectivas.</p>
        </div>
        
        <div class="card-grid">
            <div class="comic-card sociales-card hover-float">
                <i class="fas fa-landmark"></i>
                <h3>Historia en Cómics</h3>
                <p><strong>Eventos clave:</strong> Aprende sobre guerras, revoluciones y descubrimientos.</p>
                <p><strong>Biografías:</strong> Conoce a los personajes que cambiaron el mundo.</p>
                <p><strong>Cronologías:</strong> Viaja en el tiempo con nuestras líneas temporales interactivas.</p>
                <button class="btn" id="showHistoryTimelineBtn" style="margin-top: 15px; width: 100%; background: var(--sociales-turq); border-color: var(--sociales-turq);">Ver Línea Temporal</button>
            </div>
            
            <div class="comic-card sociales-card hover-float">
                <i class="fas fa-theater-masks"></i>
                <h3>Cultura y Tradiciones</h3>
                <p>Descubre diferentes culturas del mundo a través de cómics sobre fiestas, comidas, música y tradiciones.</p>
                <div id="cultureCarousel" style="height: 150px; background: var(--sociales-blue); border-radius: 10px; margin: 15px 0; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-globe-americas" style="font-size: 4rem; color: var(--sociales-turq);"></i>
                </div>
                <button class="btn" id="exploreCulturesBtn" style="margin-top: 15px; width: 100%; background: var(--sociales-turq); border-color: var(--sociales-turq);">Explorar Culturas</button>
            </div>
            
            <div class="comic-card sociales-card hover-float">
                <i class="fas fa-map-marked-alt"></i>
                <h3>Mapa Interactivo</h3>
                <p>Navega por nuestro mapa digital para aprender sobre geografía, capitales, ríos y montañas importantes.</p>
                <div style="background: var(--sociales-blue); padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
                    <p style="color: var(--sociales-turq); margin: 0; font-weight: bold;">Mapa del mundo</p>
                    <p style="color: white; margin: 5px 0 0;">196 países por descubrir</p>
                </div>
                <button class="btn" id="openInteractiveMapBtn" style="margin-top: 15px; width: 100%; background: var(--sociales-turq); border-color: var(--sociales-turq);">Abrir Mapa</button>
            </div>
        </div>
        
        <div style="margin-top: 40px;">
            <h3 style="text-align: center; color: var(--sociales-turq); margin-bottom: 20px; font-family: 'Bangers', cursive; font-size: 1.8rem;">Ejemplos de Cómics de Sociales</h3>
            <div class="comic-examples">
                <div class="comic-example-card" onclick="showExampleComic('sociales1')">
                    <i class="fas fa-ship" style="font-size: 2rem; color: var(--sociales-turq); margin-bottom: 10px;"></i>
                    <h4>El Viaje de Colón</h4>
                    <p>Descubrimiento de América</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('sociales2')">
                    <i class="fas fa-industry" style="font-size: 2rem; color: var(--sociales-turq); margin-bottom: 10px;"></i>
                    <h4>La Revolución Industrial</h4>
                    <p>Cambios históricos</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('sociales3')">
                    <i class="fas fa-handshake" style="font-size: 2rem; color: var(--sociales-turq); margin-bottom: 10px;"></i>
                    <h4>Los Valores Humanos</h4>
                    <p>Importancia del respeto</p>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px;">
            <h3 style="text-align: center; color: var(--sociales-turq); margin-bottom: 30px; font-family: 'Bangers', cursive; font-size: 2rem;">Personajes Históricos</h3>
            <div class="character-grid">
                <div class="character-card">
                    <div style="height: 200px; background: var(--sociales-blue); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-flag" style="font-size: 5rem; color: var(--sociales-turq);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Simón Bolívar</h4>
                        <p class="character-description">Conocido como "El Libertador", lideró las guerras de independencia de varios países sudamericanos contra el Imperio español.</p>
                        <button class="btn showCharacterInfoBtn" data-character="bolivar" style="background: var(--sociales-turq); border-color: var(--sociales-turq); margin-top: 10px; width: 100%;">Ver Cómic Histórico</button>
                    </div>
                </div>
                
                <div class="character-card">
                    <div style="height: 200px; background: var(--sociales-blue); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-peace" style="font-size: 5rem; color: var(--sociales-turq);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Mahatma Gandhi</h4>
                        <p class="character-description">Líder del movimiento de independencia de la India y pionero de la filosofía de la no violencia. Su lucha inspiró movimientos por los derechos civiles en todo el mundo.</p>
                        <button class="btn showCharacterInfoBtn" data-character="gandhi" style="background: var(--sociales-turq); border-color: var(--sociales-turq); margin-top: 10px; width: 100%;">Ver Cómic Histórico</button>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="naturales-template">
        <h2 class="section-title section-title-naturales hover-float">🌿 CIENCIAS NATURALES</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px; color: var(--naturales-neon);">Descubre los secretos de la naturaleza, el cuerpo humano y el medio ambiente a través de cómics científicos y experimentos virtuales.</p>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 0 auto 40px; border-color: var(--naturales-neon);">
            <h3 style="color: var(--naturales-deep); text-align: center;">¡Explora la ciencia!</h3>
            <p style="color: black;">Aprende sobre ecología, biología, química y física mediante cómics interactivos. Realiza experimentos virtuales y descubre datos curiosos sobre el mundo natural.</p>
        </div>
        
        <div class="card-grid">
            <div class="comic-card naturales-card hover-float">
                <i class="fas fa-recycle"></i>
                <h3>Ecología y Medio Ambiente</h3>
                <p><strong>Reciclaje:</strong> Aprende a clasificar residuos y reducir tu huella ecológica.</p>
                <p><strong>Energías renovables:</strong> Descubre la importancia de la energía solar y eólica.</p>
                <p><strong>Biodiversidad:</strong> Conoce especies en peligro de extinción y cómo protegerlas.</p>
                <button class="btn" id="showEcologyComicBtn" style="margin-top: 15px; width: 100%; background: var(--naturales-neon); border-color: var(--naturales-neon);">Ver Cómic Ecológico</button>
            </div>
            
            <div class="comic-card naturales-card hover-float">
                <i class="fas fa-heartbeat"></i>
                <h3>El Cuerpo Humano</h3>
                <p>Explora los sistemas del cuerpo humano a través de cómics interactivos: digestivo, circulatorio, nervioso y más.</p>
                <div id="bodySystem" style="height: 150px; background: var(--naturales-deep); border-radius: 10px; margin: 15px 0; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-lungs" style="font-size: 4rem; color: var(--naturales-neon);"></i>
                </div>
                <button class="btn" id="exploreBodySystemsBtn" style="margin-top: 15px; width: 100%; background: var(--naturales-neon); border-color: var(--naturales-neon);">Explorar Sistemas</button>
            </div>
            
            <div class="comic-card naturales-card hover-float">
                <i class="fas fa-flask"></i>
                <h3>Experimenta en Casa</h3>
                <p>Realiza experimentos científicos seguros desde tu hogar. Instrucciones paso a paso en formato cómic.</p>
                <div style="background: var(--naturales-deep); padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
                    <p style="color: var(--naturales-neon); margin: 0; font-weight: bold;">Experimento del mes:</p>
                    <p style="color: white; margin: 5px 0 0;">"Volcán de bicarbonato"</p>
                </div>
                <button class="btn" id="startExperimentBtn" style="margin-top: 15px; width: 100%; background: var(--naturales-neon); border-color: var(--naturales-neon);">Comenzar Experimento</button>
            </div>
        </div>
        
        <div style="margin-top: 40px;">
            <h3 style="text-align: center; color: var(--naturales-neon); margin-bottom: 20px; font-family: 'Bangers', cursive; font-size: 1.8rem;">Ejemplos de Cómics de Naturales</h3>
            <div class="comic-examples">
                <div class="comic-example-card" onclick="showExampleComic('naturales1')">
                    <i class="fas fa-tint" style="font-size: 2rem; color: var(--naturales-neon); margin-bottom: 10px;"></i>
                    <h4>El Ciclo del Agua</h4>
                    <p>Procesos naturales</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('naturales2')">
                    <i class="fas fa-leaf" style="font-size: 2rem; color: var(--naturales-neon); margin-bottom: 10px;"></i>
                    <h4>Los Secretos de la Fotosíntesis</h4>
                    <p>Biología vegetal</p>
                </div>
                <div class="comic-example-card" onclick="showExampleComic('naturales3')">
                    <i class="fas fa-heart" style="font-size: 2rem; color: var(--naturales-neon); margin-bottom: 10px;"></i>
                    <h4>El Sistema Circulatorio</h4>
                    <p>Anatomía humana</p>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px;">
            <h3 style="text-align: center; color: var(--naturales-neon); margin-bottom: 30px; font-family: 'Bangers', cursive; font-size: 2rem;">Científicos Famosos</h3>
            <div class="character-grid">
                <div class="character-card">
                    <div style="height: 200px; background: var(--naturales-deep); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-atom" style="font-size: 5rem; color: var(--naturales-neon);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Marie Curie</h4>
                        <p class="character-description">Primera mujer en ganar un Nobel y primera persona en ganar dos Nobel en distintas especialidades (Física y Química). Descubrió el radio y el polonio.</p>
                        <button class="btn showCharacterInfoBtn" data-character="curie" style="background: var(--naturales-neon); border-color: var(--naturales-neon); margin-top: 10px; width: 100%;">Ver Cómic Científico</button>
                    </div>
                </div>
                
                <div class="character-card">
                    <div style="height: 200px; background: var(--naturales-deep); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-dna" style="font-size: 5rem; color: var(--naturales-neon);"></i>
                    </div>
                    <div class="character-info" style="padding: 15px;">
                        <h4 class="character-name">Charles Darwin</h4>
                        <p class="character-description">Naturalista inglés que formuló la teoría de la evolución por selección natural. Su obra "El origen de las especies" revolucionó la biología.</p>
                        <button class="btn showCharacterInfoBtn" data-character="darwin" style="background: var(--naturales-neon); border-color: var(--naturales-neon); margin-top: 10px; width: 100%;">Ver Cómic Científico</button>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="galeria-template">
        <h2 class="section-title hover-float">🖼️ GALERÍA DE CÓMICS</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px;">Explora los mejores cómics creados por la comunidad estudiantil. Filtra por materia, calificación o popularidad.</p>
        </div>
        
        <div class="filter-buttons" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin: 30px auto; max-width: 1200px; padding: 0 20px;">
            <button class="btn filter-gallery-btn" data-filter="all" style="background: var(--primary); border-color: var(--primary);">Todos</button>
            <button class="btn filter-gallery-btn" data-filter="matematicas" style="background: var(--matematicas-light); border-color: var(--matematicas-light);">Matemáticas</button>
            <button class="btn filter-gallery-btn" data-filter="lengua" style="background: var(--lengua-red); border-color: var(--lengua-red);">Lengua</button>
            <button class="btn filter-gallery-btn" data-filter="sociales" style="background: var(--sociales-turq); border-color: var(--sociales-turq);">Sociales</button>
            <button class="btn filter-gallery-btn" data-filter="naturales" style="background: var(--naturales-neon); border-color: var(--naturales-neon);">Naturales</button>
            <button class="btn filter-gallery-btn" data-filter="popular" style="background: var(--cyber-purple); border-color: var(--cyber-purple);"><i class="fas fa-fire"></i> Populares</button>
            <button class="btn filter-gallery-btn" data-filter="recent" style="background: var(--cyber-pink); border-color: var(--cyber-pink);"><i class="fas fa-clock"></i> Recientes</button>
            <button class="btn filter-gallery-btn" data-filter="my" style="background: var(--cyber-orange); border-color: var(--cyber-orange);"><i class="fas fa-user"></i> Mis Cómics</button>
        </div>
        
        <div class="card-grid" id="galleryGrid">
            <!-- Los cómics se cargarán dinámicamente aquí -->
        </div>
        
        <div style="text-align: center; margin-top: 50px;">
            <button class="btn btn-comic-creator" id="openCreatorFromGallery">
                <i class="fas fa-plus"></i> CREAR MI PROPIO CÓMIC
            </button>
        </div>
    </template>
    
    <template id="ranking-template">
        <h2 class="section-title hover-float">🏆 RANKING ESTUDIANTIL</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px;">Compite con otros estudiantes, gana puntos por tus creaciones y sube en el ranking. ¡Tu esfuerzo tiene recompensa!</p>
        </div>
        
        <div class="comic-bubble" style="max-width: 800px; margin: 0 auto 40px;">
            <h3 style="color: black; text-align: center;">Sistema de Puntos</h3>
            <p style="color: black;">Gana puntos por: crear cómics (+100), recibir likes (+10), comentar (+5), completar lecciones (+50) y participar en concursos (+200).</p>
        </div>
        
        <div class="card-grid">
            <div class="comic-card hover-float" style="border-color: gold; background: linear-gradient(135deg, rgba(25, 25, 46, 0.9), rgba(212, 175, 55, 0.2));">
                <i class="fas fa-crown" style="color: gold;"></i>
                <h3 style="color: gold;">Top 1: Cómic Master</h3>
                <p><strong>Puntos:</strong> 5,430</p>
                <p><strong>Cómics creados:</strong> 42</p>
                <p><strong>Logros:</strong> 15</p>
                <div style="height: 20px; background: #333; border-radius: 10px; margin: 15px 0; overflow: hidden;">
                    <div style="width: 85%; height: 100%; background: gold;"></div>
                </div>
            </div>
            
            <div class="comic-card hover-float" style="border-color: silver; background: linear-gradient(135deg, rgba(25, 25, 46, 0.9), rgba(192, 192, 192, 0.2));">
                <i class="fas fa-medal" style="color: silver;"></i>
                <h3 style="color: silver;">Top 2: Science Hero</h3>
                <p><strong>Puntos:</strong> 4,890</p>
                <p><strong>Cómics creados:</strong> 38</p>
                <p><strong>Logros:</strong> 12</p>
                <div style="height: 20px; background: #333; border-radius: 10px; margin: 15px 0; overflow: hidden;">
                    <div style="width: 75%; height: 100%; background: silver;"></div>
                </div>
            </div>
            
            <div class="comic-card hover-float" style="border-color: #cd7f32; background: linear-gradient(135deg, rgba(25, 25, 46, 0.9), rgba(205, 127, 50, 0.2));">
                <i class="fas fa-award" style="color: #cd7f32;"></i>
                <h3 style="color: #cd7f32;">Top 3: Math Genius</h3>
                <p><strong>Puntos:</strong> 4,210</p>
                <p><strong>Cómics creados:</strong> 35</p>
                <p><strong>Logros:</strong> 10</p>
                <div style="height: 20px; background: #333; border-radius: 10px; margin: 15px 0; overflow: hidden;">
                    <div style="width: 65%; height: 100%; background: #cd7f32;"></div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px; background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px;">
            <h3 style="text-align: center; color: var(--primary); margin-bottom: 30px;">Mi Progreso</h3>
            <div id="userProgress">
                <p><strong>Mi posición:</strong> <span id="userRank">#15</span></p>
                <p><strong>Mis puntos:</strong> <span id="userPoints">1,250</span></p>
                <p><strong>Cómics creados:</strong> <span id="userComicsCount">8</span></p>
                <p><strong>Logros desbloqueados:</strong> 3/20</p>
                <div style="height: 20px; background: #333; border-radius: 10px; margin: 15px 0; overflow: hidden;">
                    <div id="userProgressBar" style="width: 40%; height: 100%; background: var(--primary);"></div>
                </div>
                <p style="text-align: center; font-size: 0.9rem;">Progreso hacia el siguiente nivel: 40%</p>
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="viewMyComicsBtn"><i class="fas fa-book"></i> Ver Mis Cómics</button>
                <button class="btn" id="viewAchievementsBtn"><i class="fas fa-trophy"></i> Ver Logros</button>
                <button class="btn" id="openCreatorFromRanking"><i class="fas fa-plus"></i> Crear Nuevo Cómic</button>
            </div>
        </div>
    </template>
    
    <!-- NUEVO TEMPLATE: Mis Cómics -->
    <template id="mis-comics-template">
        <h2 class="section-title hover-float">📚 MIS CÓMICS</h2>
        <div style="text-align: center; margin-bottom: 40px;">
            <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 40px;">Aquí puedes ver todos los cómics que has creado. Edítalos, compártelos o elimínalos.</p>
        </div>
        
        <div id="myComicsContainer">
            <!-- Los cómics del usuario se cargarán aquí -->
            <div id="noComicsMessage" style="text-align: center; padding: 50px; background: rgba(255,255,255,0.05); border-radius: 15px; display: none;">
                <i class="fas fa-book" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;"></i>
                <h3 style="color: var(--primary); margin-bottom: 15px;">Aún no has creado cómics</h3>
                <p style="margin-bottom: 25px;">¡Crea tu primer cómic educativo y compártelo con la comunidad!</p>
                <button class="btn btn-comic-creator" id="createFirstComicBtn">
                    <i class="fas fa-plus"></i> CREAR MI PRIMER CÓMIC
                </button>
            </div>
            
            <div class="my-comics-grid" id="myComicsGrid">
                <!-- Los cómics se cargarán dinámicamente aquí -->
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 50px;">
            <button class="btn" id="backToGalleryBtn">
                <i class="fas fa-arrow-left"></i> VOLVER A GALERÍA
            </button>
            <button class="btn btn-comic-creator" id="createNewComicBtn">
                <i class="fas fa-plus"></i> CREAR NUEVO CÓMIC
            </button>
        </div>
    </template>
    
    <script>
        // ========== SISTEMA DEL PORTAL EDUCATIVO ==========
        
        // Estado del usuario
        let currentUser = null;
        let currentSection = 'inicio';
        let slideInterval;
        let lastScrollY = 0;
        let isHeaderHidden = false;
        let hideTimeout = null;
        let showTimeout = null;
        
        // Nuevas variables para el sistema de puntos
        let userPoints = 1250;
        let userComicsCount = 0;
        let userRank = 15;
        
        // ========== SISTEMA DEL EDITOR DE CÓMICS ==========
        
        // Base de datos de personajes para el editor
        const characters = [
            { id: 1, type: 'profesor', name: 'Profesor', icon: 'fa-chalkboard-teacher', color: 'profesor', description: 'Profesor de Matemáticas' },
            { id: 2, type: 'profesora', name: 'Profesora', icon: 'fa-chalkboard-teacher', color: 'profesor', description: 'Profesora de Ciencias' },
            { id: 3, type: 'estudiante', name: 'Estudiante', icon: 'fa-user-graduate', color: 'estudiante', description: 'Estudiante Curioso' },
            { id: 4, type: 'estudiante2', name: 'Estudiante 2', icon: 'fa-user-graduate', color: 'estudiante', description: 'Compañero de Clase' },
            { id: 5, type: 'cientifico', name: 'Científico', icon: 'fa-atom', color: 'cientifico', description: 'Investigador' },
            { id: 6, type: 'historiador', name: 'Historiador', icon: 'fa-landmark', color: 'historiador', description: 'Experto en Historia' },
            { id: 7, type: 'deportista', name: 'Deportista', icon: 'fa-running', color: 'deportista', description: 'Estudiante Deportista' },
            { id: 8, type: 'artista', name: 'Artista', icon: 'fa-palette', color: 'artista', description: 'Estudiante Creativo' }
        ];

        // Estado del editor de cómics
        let currentComic = {
            id: null,
            title: 'Mi Aventura Educativa',
            subject: 'matematicas',
            panels: [],
            createdAt: null,
            updatedAt: null
        };

        let selectedCharacter = null;
        let currentPanelId = 1;
        let panelCounter = 1;
        let dialogueCounter = 0;
        let currentFilter = 'all';
        let currentSearch = '';
        
        // Generar partículas flotantes
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 40;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 60 + 20;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                particle.style.opacity = Math.random() * 0.2 + 0.1;
                
                const duration = Math.random() * 30 + 20;
                const delay = Math.random() * 20;
                particle.style.animationDuration = `${duration}s`;
                particle.style.animationDelay = `${delay}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // ========== FUNCIONES DEL PORTAL EDUCATIVO ==========
        
        // Sistema de navegación por secciones
        function navigateToSection(sectionId) {
            if (slideInterval) {
                clearInterval(slideInterval);
                slideInterval = null;
            }
            
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
                section.innerHTML = '';
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                currentSection = sectionId;
                
                loadSectionContent(sectionId);
                
                history.pushState({section: sectionId}, '', `#${sectionId}`);
                
                window.scrollTo({
                    top: document.querySelector('.main-content').offsetTop - 100,
                    behavior: 'smooth'
                });
                
                // Actualizar botón "Mis Cómics" en el header
                updateMyComicsButton();
            }
        }
        
        // Cargar contenido de sección
        function loadSectionContent(sectionId) {
            const section = document.getElementById(sectionId);
            const template = document.getElementById(`${sectionId}-template`);
            
            if (template) {
                const content = document.importNode(template.content, true);
                section.appendChild(content);
                
                initializeSectionComponents(sectionId);
            } else {
                section.innerHTML = `<h2 class="section-title">${sectionId.toUpperCase()}</h2><p>Contenido en desarrollo para esta sección.</p>`;
            }
        }
        
        // Inicializar componentes específicos de cada sección
        function initializeSectionComponents(sectionId) {
            switch(sectionId) {
                case 'inicio':
                    initializeHomeSlider();
                    break;
                case 'galeria':
                    loadGalleryComics();
                    break;
                case 'ranking':
                    updateUserRankingStats();
                    break;
                case 'mis-comics':
                    loadMyComics();
                    break;
            }
            
            setTimeout(() => {
                attachEventListeners();
            }, 100);
        }
        
        // Inicializar slider de inicio
        function initializeHomeSlider() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const indicators = document.querySelectorAll('.indicator');
            
            function showSlide(index) {
                slides.forEach(slide => {
                    slide.classList.remove('active');
                });
                indicators.forEach(indicator => {
                    indicator.classList.remove('active');
                });
                
                if (slides[index]) {
                    slides[index].classList.add('active');
                    indicators[index].classList.add('active');
                    currentSlide = index;
                }
            }
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    showSlide(index);
                });
            });
            
            slideInterval = setInterval(() => {
                let nextSlide = (currentSlide + 1) % slides.length;
                showSlide(nextSlide);
            }, 6000);
        }
        
        // Cargar galería de cómics
        function loadGalleryComics(filter = 'all') {
            const galleryGrid = document.getElementById('galleryGrid');
            if (!galleryGrid) return;
            
            let comics = getComicsFromStorage();
            
            // Si el filtro es "mis cómics", redirigir a la sección Mis Cómics
            if (filter === 'my' && currentUser) {
                navigateToSection('mis-comics');
                return;
            }
            
            // Aplicar filtros
            if (filter === 'my' && currentUser) {
                comics = comics.filter(comic => comic.author === currentUser.username);
            } else if (filter !== 'all' && filter !== 'popular' && filter !== 'recent') {
                comics = comics.filter(comic => comic.subject === filter);
            }
            
            // Ordenar
            if (filter === 'popular') {
                comics.sort((a, b) => (b.likes || 0) - (a.likes || 0));
            } else if (filter === 'recent') {
                comics.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            galleryGrid.innerHTML = '';
            
            if (comics.length === 0) {
                galleryGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 50px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                        <i class="fas fa-book" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--primary); margin-bottom: 15px;">No hay cómics aún</h3>
                        <p style="margin-bottom: 25px;">¡Sé el primero en crear un cómic educativo!</p>
                        <button class="btn btn-comic-creator" id="createFirstComicGallery">
                            <i class="fas fa-plus"></i> CREAR PRIMER CÓMIC
                        </button>
                    </div>
                `;
                return;
            }
            
            comics.forEach(comic => {
                const comicCard = document.createElement('div');
                comicCard.className = 'comic-card hover-float';
                comicCard.dataset.subject = comic.subject;
                
                let subjectColor = '';
                let subjectClass = '';
                switch(comic.subject) {
                    case 'matematicas': 
                        subjectColor = 'var(--matematicas-light)'; 
                        subjectClass = 'matematicas-card'; 
                        break;
                    case 'lengua': 
                        subjectColor = 'var(--lengua-red)'; 
                        subjectClass = 'lengua-card'; 
                        break;
                    case 'sociales': 
                        subjectColor = 'var(--sociales-turq)'; 
                        subjectClass = 'sociales-card'; 
                        break;
                    case 'naturales': 
                        subjectColor = 'var(--naturales-neon)'; 
                        subjectClass = 'naturales-card'; 
                        break;
                    default:
                        subjectColor = 'var(--primary)';
                }
                
                comicCard.classList.add(subjectClass);
                
                // Formatear fecha
                const date = new Date(comic.date);
                const formattedDate = date.toLocaleDateString('es-ES', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                
                comicCard.innerHTML = `
                    <div style="height: 150px; background: ${subjectColor}20; border-radius: 10px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-book" style="font-size: 4rem; color: ${subjectColor};"></i>
                    </div>
                    <h3>${comic.title}</h3>
                    <p><strong>Autor:</strong> ${comic.author}</p>
                    <p><strong>Materia:</strong> ${getSubjectLabel(comic.subject)}</p>
                    <p>${comic.description || 'Cómic educativo creado por ' + comic.author}</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                        <span><i class="fas fa-heart" style="color: ${subjectColor};"></i> ${comic.likes || 0}</span>
                        <span><i class="fas fa-eye" style="color: ${subjectColor};"></i> ${comic.views || 0}</span>
                        <span><i class="fas fa-calendar" style="color: ${subjectColor};"></i> ${formattedDate}</span>
                    </div>
                    <button class="btn view-comic-btn" data-id="${comic.id}" style="margin-top: 15px; width: 100%; background: ${subjectColor}; border-color: ${subjectColor};">Leer Cómic</button>
                `;
                
                galleryGrid.appendChild(comicCard);
            });
        }
        
        // Obtener etiqueta de materia
        function getSubjectLabel(subject) {
            const labels = {
                'matematicas': 'Matemáticas',
                'ciencias': 'Ciencias Naturales',
                'sociales': 'Ciencias Sociales',
                'lengua': 'Lengua Española',
                'arte': 'Arte y Cultura'
            };
            return labels[subject] || subject;
        }
        
        // Cargar mis cómics
        function loadMyComics() {
            const myComicsGrid = document.getElementById('myComicsGrid');
            const noComicsMessage = document.getElementById('noComicsMessage');
            
            if (!myComicsGrid || !noComicsMessage) return;
            
            let comics = getComicsFromStorage();
            
            if (currentUser) {
                comics = comics.filter(comic => comic.author === currentUser.username);
            } else {
                comics = [];
            }
            
            myComicsGrid.innerHTML = '';
            
            if (comics.length === 0) {
                noComicsMessage.style.display = 'block';
                myComicsGrid.style.display = 'none';
                return;
            }
            
            noComicsMessage.style.display = 'none';
            myComicsGrid.style.display = 'grid';
            
            comics.forEach((comic, index) => {
                const comicCard = document.createElement('div');
                comicCard.className = 'my-comic-card hover-float';
                
                let subjectColor = 'var(--primary)';
                switch(comic.subject) {
                    case 'matematicas': subjectColor = 'var(--matematicas-light)'; break;
                    case 'ciencias': subjectColor = 'var(--sociales-turq)'; break;
                    case 'sociales': subjectColor = 'var(--naturales-neon)'; break;
                    case 'lengua': subjectColor = 'var(--lengua-red)'; break;
                    case 'arte': subjectColor = 'var(--cyber-purple)'; break;
                }
                
                comicCard.style.borderLeftColor = subjectColor;
                
                const date = new Date(comic.date);
                const formattedDate = date.toLocaleDateString('es-ES', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                
                comicCard.innerHTML = `
                    <h4>${comic.title}</h4>
                    <p><strong>Materia:</strong> ${getSubjectLabel(comic.subject)}</p>
                    <p><strong>Paneles:</strong> ${comic.panels ? comic.panels.length : 0}</p>
                    <p><strong>Creado:</strong> ${formattedDate}</p>
                    <div class="comic-stats">
                        <span><i class="fas fa-heart"></i> ${comic.likes || 0}</span>
                        <span><i class="fas fa-eye"></i> ${comic.views || 0}</span>
                        <span><i class="fas fa-comment"></i> ${comic.comments || 0}</span>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="btn view-my-comic-btn" data-index="${index}" style="flex: 1; background: ${subjectColor}; border-color: ${subjectColor}; font-size: 0.9rem;">Ver</button>
                        <button class="btn edit-comic-btn" data-index="${index}" style="flex: 1; background: var(--sociales-turq); border-color: var(--sociales-turq); font-size: 0.9rem;">Editar</button>
                        <button class="btn delete-comic-btn" data-index="${index}" style="flex: 1; background: var(--lengua-red); border-color: var(--lengua-red); font-size: 0.9rem;">Eliminar</button>
                    </div>
                `;
                
                myComicsGrid.appendChild(comicCard);
            });
        }
        
        // Obtener cómics del localStorage
        function getComicsFromStorage() {
            return JSON.parse(localStorage.getItem('educomics')) || [];
        }
        
        // Guardar cómics en localStorage
        function saveComicsToStorage(comics) {
            localStorage.setItem('educomics', JSON.stringify(comics));
        }
        
        // Filtrar galería
        function filterGallery(filter) {
            loadGalleryComics(filter);
        }
        
        // Actualizar estadísticas del ranking
        function updateUserRankingStats() {
            if (!currentUser) return;
            
            // Obtener cómics del usuario
            const comics = getComicsFromStorage();
            userComicsCount = comics.filter(comic => comic.author === currentUser.username).length;
            
            // Calcular puntos (100 por cómic + 10 por like simulado)
            userPoints = userComicsCount * 100 + Math.floor(userComicsCount * 3.5) * 10;
            
            // Actualizar la interfaz
            const userRankElement = document.getElementById('userRank');
            const userPointsElement = document.getElementById('userPoints');
            const userComicsCountElement = document.getElementById('userComicsCount');
            const userProgressBar = document.getElementById('userProgressBar');
            
            if (userRankElement) userRankElement.textContent = `#${userRank}`;
            if (userPointsElement) userPointsElement.textContent = userPoints.toLocaleString();
            if (userComicsCountElement) userComicsCountElement.textContent = userComicsCount;
            if (userProgressBar) {
                const progress = Math.min((userComicsCount / 20) * 100, 100);
                userProgressBar.style.width = `${progress}%`;
            }
        }
        
        // Actualizar botón "Mis Cómics"
        function updateMyComicsButton() {
            const myComicsBtn = document.getElementById('myComicsBtn');
            if (!myComicsBtn) return;
            
            if (currentUser) {
                myComicsBtn.style.display = 'inline-block';
                
                // Contar cómics del usuario
                const comics = getComicsFromStorage();
                const userComics = comics.filter(comic => comic.author === currentUser.username).length;
                
                // Añadir badge con número de cómics
                let badge = myComicsBtn.querySelector('.comic-count-badge');
                if (!badge) {
                    badge = document.createElement('span');
                    badge.className = 'comic-count-badge';
                    badge.style.cssText = `
                        position: absolute;
                        top: -8px;
                        right: -8px;
                        background: var(--lengua-red);
                        color: white;
                        font-size: 0.7rem;
                        padding: 2px 6px;
                        border-radius: 10px;
                        min-width: 18px;
                        text-align: center;
                    `;
                    myComicsBtn.style.position = 'relative';
                    myComicsBtn.appendChild(badge);
                }
                badge.textContent = userComics;
            } else {
                myComicsBtn.style.display = 'none';
            }
        }
        
        // Función para ver cómic
        function viewComic(id) {
            const comics = getComicsFromStorage();
            const comic = comics.find(c => c.id === id);
            
            if (!comic) {
                alert('Cómic no encontrado');
                return;
            }
            
            // Incrementar vistas
            comic.views = (comic.views || 0) + 1;
            saveComicsToStorage(comics);
            
            // Mostrar modal con el cómic
            const modalHTML = `
                <div class="modal" id="comicViewModal">
                    <div class="modal-content hover-float" style="width: 800px; max-height: 90vh; overflow-y: auto;">
                        <span class="modal-close" id="closeComicViewModal">&times;</span>
                        <h2 class="modal-title">${comic.title}</h2>
                        <div style="text-align: center; margin-bottom: 20px;">
                            <p><strong>Autor:</strong> ${comic.author} | <strong>Materia:</strong> ${getSubjectLabel(comic.subject)}</p>
                            <p>${comic.description || ''}</p>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; border: 3px solid black;">
                            ${comic.panels ? comic.panels.map((panel, index) => `
                                <div style="border-bottom: ${index < comic.panels.length - 1 ? '2px dashed #ccc' : 'none'}; padding: ${index < comic.panels.length - 1 ? '0 0 20px 0' : '0'}; margin-bottom: ${index < comic.panels.length - 1 ? '20px' : '0'};">
                                    ${panel.text ? panel.text.map(text => `
                                        <div class="comic-bubble" style="margin: 10px 0; background: white; color: black;">
                                            ${text}
                                        </div>
                                    `).join('') : ''}
                                    ${panel.characters && panel.characters.length > 0 ? `
                                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                                            ${panel.characters.map(charId => {
                                                const char = characters.find(c => c.id === charId);
                                                return char ? `
                                                    <div style="display: flex; align-items: center; gap: 5px;">
                                                        <i class="fas ${char.icon}" style="color: ${char.color === 'profesor' ? 'var(--matematicas-light)' : char.color === 'estudiante' ? 'var(--lengua-red)' : char.color === 'cientifico' ? 'var(--sociales-turq)' : char.color === 'historiador' ? 'var(--naturales-neon)' : 'var(--primary)'};"></i>
                                                        <span>${char.name}</span>
                                                    </div>
                                                ` : '';
                                            }).join('')}
                                        </div>
                                    ` : ''}
                                    <div style="font-size: 0.8rem; color: #666; margin-top: 5px; text-align: right;">Panel ${index + 1}</div>
                                </div>
                            `).join('') : '<p>No hay paneles en este cómic</p>'}
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                            <button class="btn like-comic-btn" data-id="${comic.id}" style="background: var(--lengua-red); border-color: var(--lengua-red);">
                                <i class="fas fa-heart"></i> Me gusta (${comic.likes || 0})
                            </button>
                            <button class="btn" onclick="alert('Funcionalidad de comentarios en desarrollo')">
                                <i class="fas fa-comment"></i> Comentar
                            </button>
                            <button class="btn" onclick="alert('Funcionalidad de compartir en desarrollo')">
                                <i class="fas fa-share"></i> Compartir
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Crear modal temporal
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHTML;
            document.body.appendChild(modalContainer.firstChild);
            
            const modal = document.getElementById('comicViewModal');
            modal.style.display = 'flex';
            
            // Configurar cierre del modal
            document.getElementById('closeComicViewModal').onclick = function() {
                modal.style.display = 'none';
                document.body.removeChild(modal);
            };
            
            // Configurar like
            document.querySelector('.like-comic-btn').onclick = function() {
                const comics = getComicsFromStorage();
                const comicIndex = comics.findIndex(c => c.id === id);
                if (comicIndex !== -1) {
                    comics[comicIndex].likes = (comics[comicIndex].likes || 0) + 1;
                    saveComicsToStorage(comics);
                    
                    // Actualizar contador en el modal
                    this.innerHTML = `<i class="fas fa-heart"></i> Me gusta (${comics[comicIndex].likes})`;
                    alert('¡Gracias por tu like!');
                }
            };
            
            // Cerrar al hacer clic fuera
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    document.body.removeChild(modal);
                }
            };
        }
        
        // Función para mostrar cómics de ejemplo
        function showExampleComic(comicType) {
            const exampleComics = {
                'matematicas1': {
                    title: 'El Misterio del Triángulo',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Profesor: Hoy aprenderemos sobre el Teorema de Pitágoras', 'Estudiante: ¿Qué dice ese teorema?'],
                            characters: [1, 3]
                        },
                        {
                            panelNumber: 2,
                            text: ['Profesor: En un triángulo rectángulo, el cuadrado de la hipotenusa es igual a la suma de los cuadrados de los catetos'],
                            characters: [1]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Ah! Entonces si los catetos miden 3 y 4...', '¡La hipotenusa debe medir 5!'],
                            characters: [3]
                        }
                    ]
                },
                'matematicas2': {
                    title: 'El Gran Desafío Algebraico',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Profesor: Resolvamos la ecuación: 2x + 5 = 15'],
                            characters: [1]
                        },
                        {
                            panelNumber: 2,
                            text: ['Estudiante: Primero restamos 5: 2x = 10'],
                            characters: [3]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: Luego dividimos entre 2: x = 5', '¡Solución encontrada!'],
                            characters: [3]
                        }
                    ]
                },
                'matematicas3': {
                    title: 'Estadísticas Divertidas',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Estudiante: ¿Cómo calculamos el promedio de nuestras calificaciones?'],
                            characters: [3]
                        },
                        {
                            panelNumber: 2,
                            text: ['Profesor: Sumas todas las notas y divides entre el número de exámenes'],
                            characters: [1]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Entonces si tengo 8, 9 y 10, mi promedio es 9!'],
                            characters: [3]
                        }
                    ]
                },
                'lengua1': {
                    title: 'Las Aventuras del Punto y la Coma',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Punto: Yo sirvo para terminar una oración'],
                            characters: []
                        },
                        {
                            panelNumber: 2,
                            text: ['Coma: Y yo para hacer pausas breves', '¡Juntos hacemos la lectura más clara!'],
                            characters: []
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Ahora entiendo la importancia de la puntuación!'],
                            characters: [3]
                        }
                    ]
                },
                'lengua2': {
                    title: 'El Concurso de Poesía',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Profesora: Hoy tenemos un concurso de poesía', 'El tema es "La naturaleza"'],
                            characters: [2, 3]
                        },
                        {
                            panelNumber: 2,
                            text: ['Estudiante: Escribiré sobre los árboles y el viento', 'Usaré metáforas y rimas'],
                            characters: [3]
                        },
                        {
                            panelNumber: 3,
                            text: ['Profesora: ¡Excelente poema!', 'Has usado figuras literarias muy creativas'],
                            characters: [2, 3]
                        }
                    ]
                },
                'lengua3': {
                    title: 'Los Secretos de la Ortografía',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Estudiante: Siempre confundo "b" y "v"'],
                            characters: [3]
                        },
                        {
                            panelNumber: 2,
                            text: ['Profesor: Recuerda: después de "m" siempre va "b"', 'Ejemplo: "cambio", "tambor"'],
                            characters: [1]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Ya lo entiendo! "b" después de "m", "v" en los demás casos'],
                            characters: [3]
                        }
                    ]
                },
                'sociales1': {
                    title: 'El Viaje de Colón',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Historiador: En 1492, Cristóbal Colón partió hacia las Indias'],
                            characters: [6]
                        },
                        {
                            panelNumber: 2,
                            text: ['Historiador: Tras 70 días en el mar, avistaron tierra'],
                            characters: [6]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Así descubrió América pensando que era Asia!'],
                            characters: [3]
                        }
                    ]
                },
                'sociales2': {
                    title: 'La Revolución Industrial',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Historiador: En el siglo XVIII comenzó la Revolución Industrial'],
                            characters: [6]
                        },
                        {
                            panelNumber: 2,
                            text: ['Historiador: Las máquinas reemplazaron el trabajo manual', 'Aparecieron las fábricas'],
                            characters: [6]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Cambió completamente la sociedad y la economía!'],
                            characters: [3]
                        }
                    ]
                },
                'sociales3': {
                    title: 'Los Valores Humanos',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Profesor: ¿Qué valores son importantes para convivir en sociedad?'],
                            characters: [1]
                        },
                        {
                            panelNumber: 2,
                            text: ['Estudiante: El respeto, la honestidad y la solidaridad'],
                            characters: [3]
                        },
                        {
                            panelNumber: 3,
                            text: ['Profesor: ¡Exacto! Estos valores nos ayudan a vivir mejor juntos'],
                            characters: [1, 3]
                        }
                    ]
                },
                'naturales1': {
                    title: 'El Ciclo del Agua',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Científico: El agua se evapora de los océanos'],
                            characters: [5]
                        },
                        {
                            panelNumber: 2,
                            text: ['Científico: Forma nubes en la atmósfera'],
                            characters: [5]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Y vuelve a la tierra como lluvia o nieve!', 'Es el ciclo del agua'],
                            characters: [3]
                        }
                    ]
                },
                'naturales2': {
                    title: 'Los Secretos de la Fotosíntesis',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Científico: Las plantas usan la luz del sol para hacer su alimento'],
                            characters: [5]
                        },
                        {
                            panelNumber: 2,
                            text: ['Científico: Convierten dióxido de carbono y agua en glucosa y oxígeno'],
                            characters: [5]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Por eso son tan importantes para el planeta!', 'Producen el oxígeno que respiramos'],
                            characters: [3]
                        }
                    ]
                },
                'naturales3': {
                    title: 'El Sistema Circulatorio',
                    panels: [
                        {
                            panelNumber: 1,
                            text: ['Científico: El corazón bombea sangre a todo el cuerpo'],
                            characters: [5]
                        },
                        {
                            panelNumber: 2,
                            text: ['Científico: La sangre lleva oxígeno y nutrientes a las células'],
                            characters: [5]
                        },
                        {
                            panelNumber: 3,
                            text: ['Estudiante: ¡Y retira los desechos! El cuerpo es una máquina increíble'],
                            characters: [3]
                        }
                    ]
                }
            };
            
            const comic = exampleComics[comicType];
            if (!comic) {
                alert('Cómic no encontrado');
                return;
            }
            
            // Mostrar modal con el cómic de ejemplo
            const modalHTML = `
                <div class="modal" id="exampleComicModal">
                    <div class="modal-content hover-float" style="width: 800px; max-height: 90vh; overflow-y: auto;">
                        <span class="modal-close" id="closeExampleComicModal">&times;</span>
                        <h2 class="modal-title">${comic.title}</h2>
                        <div style="text-align: center; margin-bottom: 20px;">
                            <p><strong>Ejemplo educativo</strong></p>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; border: 3px solid black;">
                            ${comic.panels ? comic.panels.map((panel, index) => `
                                <div style="border-bottom: ${index < comic.panels.length - 1 ? '2px dashed #ccc' : 'none'}; padding: ${index < comic.panels.length - 1 ? '0 0 20px 0' : '0'}; margin-bottom: ${index < comic.panels.length - 1 ? '20px' : '0'};">
                                    ${panel.text ? panel.text.map(text => `
                                        <div class="comic-bubble" style="margin: 10px 0; background: white; color: black;">
                                            ${text}
                                        </div>
                                    `).join('') : ''}
                                    ${panel.characters && panel.characters.length > 0 ? `
                                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                                            ${panel.characters.map(charId => {
                                                const char = characters.find(c => c.id === charId);
                                                return char ? `
                                                    <div style="display: flex; align-items: center; gap: 5px;">
                                                        <i class="fas ${char.icon}" style="color: ${char.color === 'profesor' ? 'var(--matematicas-light)' : char.color === 'estudiante' ? 'var(--lengua-red)' : char.color === 'cientifico' ? 'var(--sociales-turq)' : char.color === 'historiador' ? 'var(--naturales-neon)' : 'var(--primary)'};"></i>
                                                        <span>${char.name}</span>
                                                    </div>
                                                ` : '';
                                            }).join('')}
                                        </div>
                                    ` : ''}
                                    <div style="font-size: 0.8rem; color: #666; margin-top: 5px; text-align: right;">Panel ${index + 1}</div>
                                </div>
                            `).join('') : '<p>No hay paneles en este cómic</p>'}
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="btn" onclick="alert('¡Inspírate y crea tu propio cómic sobre este tema!')" style="background: var(--primary); border-color: var(--primary);">
                                <i class="fas fa-lightbulb"></i> ¡Crea tu versión!
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Crear modal temporal
            const modalContainer = document.createElement('div');
            modalContainer.innerHTML = modalHTML;
            document.body.appendChild(modalContainer.firstChild);
            
            const modal = document.getElementById('exampleComicModal');
            modal.style.display = 'flex';
            
            // Configurar cierre del modal
            document.getElementById('closeExampleComicModal').onclick = function() {
                modal.style.display = 'none';
                document.body.removeChild(modal);
            };
            
            // Cerrar al hacer clic fuera
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    document.body.removeChild(modal);
                }
            };
        }
        
        // ========== FUNCIONES DEL EDITOR DE CÓMICS ==========
        
        // Inicializar el editor
        function initializeEditor() {
            // Cargar personajes
            loadCharacters();
            
            // Configurar eventos del editor
            document.getElementById('comicTitle').addEventListener('input', function() {
                currentComic.title = this.value;
            });
            
            document.getElementById('subjectSelect').addEventListener('change', function() {
                currentComic.subject = this.value;
            });
            
            // Añadir diálogo inicial
            addDialogueToPanel();
            
            // Cargar cómics de ejemplo si no hay
            initializeLibrary();
        }
        
        // Cargar personajes en el grid
        function loadCharacters() {
            const grid = document.getElementById('charactersGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            characters.forEach(char => {
                const charElement = document.createElement('div');
                charElement.className = `character-item ${char.color}`;
                charElement.dataset.id = char.id;
                charElement.dataset.type = char.type;
                charElement.dataset.name = char.name;
                charElement.dataset.description = char.description;
                charElement.dataset.icon = char.icon;
                
                charElement.innerHTML = `
                    <div class="character-icon">
                        <i class="fas ${char.icon}"></i>
                    </div>
                    <div class="character-name">${char.name}</div>
                `;
                
                // Evento de clic para seleccionar personaje
                charElement.addEventListener('click', function() {
                    selectCharacter(this);
                });
                
                grid.appendChild(charElement);
            });
        }
        
        // Inicializar biblioteca con ejemplos si está vacía
        function initializeLibrary() {
            let comics = getComicsFromStorage();
            
            if (comics.length === 0) {
                // Crear cómics de ejemplo
                const exampleComics = [
                    {
                        id: Date.now(),
                        title: "El Misterio del Triángulo",
                        subject: "matematicas",
                        panels: [
                            {
                                panelNumber: 1,
                                text: ["Profesor: Hoy aprenderemos sobre el Teorema de Pitágoras", "Estudiante: ¿Y eso qué es?"],
                                characters: [1, 3]
                            },
                            {
                                panelNumber: 2,
                                text: ["Profesor: En un triángulo rectángulo...", "a² + b² = c²"],
                                characters: [1]
                            },
                            {
                                panelNumber: 3,
                                text: ["Estudiante: ¡Ah! Entonces si a=3 y b=4...", "¡c debe ser 5!"],
                                characters: [3]
                            }
                        ],
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        author: "Sistema",
                        description: "Cómic educativo sobre el Teorema de Pitágoras"
                    },
                    {
                        id: Date.now() + 1,
                        title: "El Ciclo del Agua",
                        subject: "ciencias",
                        panels: [
                            {
                                panelNumber: 1,
                                text: ["Científico: Observa cómo el agua se evapora del océano"],
                                characters: [5]
                            },
                            {
                                panelNumber: 2,
                                text: ["Luego forma nubes en la atmósfera"],
                                characters: []
                            },
                            {
                                panelNumber: 3,
                                text: ["¡Y vuelve a la tierra como lluvia!"],
                                characters: [3]
                            }
                        ],
                        createdAt: new Date(Date.now() - 86400000).toISOString(), // Ayer
                        updatedAt: new Date(Date.now() - 86400000).toISOString(),
                        author: "Sistema",
                        description: "Cómic educativo sobre el ciclo del agua"
                    }
                ];
                
                comics = [...comics, ...exampleComics];
                saveComicsToStorage(comics);
            }
        }
        
        // ========== BIBLIOTECA DEL EDITOR ==========
        
        // Mostrar biblioteca
        function showLibrary() {
            document.getElementById('libraryContainer').style.display = 'block';
            loadLibrary();
        }
        
        // Ocultar biblioteca
        function hideLibrary() {
            document.getElementById('libraryContainer').style.display = 'none';
        }
        
        // Cargar biblioteca
        function loadLibrary() {
            const comics = getComicsFromStorage();
            displayComics(comics);
        }
        
        // Mostrar cómics en la biblioteca
        function displayComics(comics) {
            const grid = document.getElementById('comicsGrid');
            const emptyMsg = document.getElementById('emptyLibraryMessage');
            
            // Filtrar cómics
            let filteredComics = comics;
            
            if (currentFilter !== 'all') {
                filteredComics = comics.filter(c => c.subject === currentFilter);
            }
            
            if (currentSearch) {
                const searchTerm = currentSearch.toLowerCase();
                filteredComics = filteredComics.filter(c => 
                    c.title.toLowerCase().includes(searchTerm) ||
                    c.subject.toLowerCase().includes(searchTerm) ||
                    (c.author && c.author.toLowerCase().includes(searchTerm))
                );
            }
            
            // Filtrar por usuario actual si está logueado
            if (currentUser) {
                filteredComics = filteredComics.filter(c => c.author === currentUser.username || c.author === "Sistema");
            } else {
                filteredComics = filteredComics.filter(c => c.author === "Sistema");
            }
            
            if (filteredComics.length === 0) {
                grid.style.display = 'none';
                emptyMsg.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            emptyMsg.style.display = 'none';
            grid.innerHTML = '';
            
            // Ordenar por fecha (más recientes primero)
            filteredComics.sort((a, b) => new Date(b.createdAt || b.date) - new Date(a.createdAt || a.date));
            
            filteredComics.forEach(comic => {
                const subjectClass = `subject-${comic.subject}`;
                const subjectLabels = {
                    'matematicas': 'Matemáticas',
                    'ciencias': 'Ciencias',
                    'sociales': 'Sociales',
                    'lengua': 'Lengua',
                    'arte': 'Arte'
                };
                
                const date = new Date(comic.createdAt || comic.date).toLocaleDateString('es-ES', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric'
                });
                
                // Icono según la materia
                const icons = {
                    'matematicas': 'fa-calculator',
                    'ciencias': 'fa-flask',
                    'sociales': 'fa-globe-americas',
                    'lengua': 'fa-book',
                    'arte': 'fa-palette'
                };
                
                // Color según la materia
                const colors = {
                    'matematicas': 'var(--matematicas-light)',
                    'ciencias': 'var(--sociales-turq)',
                    'sociales': 'var(--naturales-neon)',
                    'lengua': 'var(--lengua-red)',
                    'arte': 'var(--cyber-purple)'
                };
                
                const card = document.createElement('div');
                card.className = 'comic-card-editor';
                card.dataset.id = comic.id;
                
                card.innerHTML = `
                    <div class="comic-preview" style="background: ${colors[comic.subject] || 'var(--primary)'}">
                        <i class="fas ${icons[comic.subject] || 'fa-book'}" style="color: white; font-size: 4rem;"></i>
                    </div>
                    <div class="comic-info">
                        <div class="comic-title-editor" title="${comic.title}">${comic.title}</div>
                        <div class="comic-meta">
                            <span>${date}</span>
                            <span>${comic.panels ? comic.panels.length : 0} viñeta${comic.panels && comic.panels.length !== 1 ? 's' : ''}</span>
                        </div>
                        <div class="comic-subject ${subjectClass}">
                            ${subjectLabels[comic.subject] || comic.subject}
                        </div>
                    </div>
                    <div class="comic-actions">
                        <button class="card-action-btn load-btn" onclick="loadComicIntoEditor(${comic.id})">
                            <i class="fas fa-folder-open"></i> Cargar
                        </button>
                        ${comic.author !== "Sistema" ? `
                        <button class="card-action-btn delete-btn" onclick="deleteComicFromLibrary(${comic.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                        ` : ''}
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        // Filtrar cómics
        function filterComics() {
            currentSearch = document.getElementById('searchBox').value.toLowerCase();
            loadLibrary();
        }
        
        // Establecer filtro
        function setFilter(filter) {
            currentFilter = filter;
            
            // Actualizar botones de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadLibrary();
        }
        
        // Cargar cómic en el editor
        function loadComicIntoEditor(id) {
            const comics = getComicsFromStorage();
            const comic = comics.find(c => c.id === id);
            
            if (!comic) {
                alert('No se encontró el cómic');
                return;
            }
            
            // Cargar cómic en el editor
            currentComic = { ...comic };
            
            // Configurar editor
            document.getElementById('comicTitle').value = comic.title;
            document.getElementById('subjectSelect').value = comic.subject;
            
            // Limpiar área de cómic
            const comicArea = document.getElementById('comicArea');
            comicArea.innerHTML = '';
            
            // Cargar viñetas
            comic.panels.forEach((panel, index) => {
                if (index > 0) addNewPanel();
                
                const currentPanel = comicArea.querySelector(`.comic-panel[data-panel="${index + 1}"]`);
                if (currentPanel) {
                    const panelContent = currentPanel.querySelector('.panel-content');
                    panelContent.innerHTML = '';
                    
                    // Añadir diálogos
                    if (panel.text && Array.isArray(panel.text)) {
                        panel.text.forEach(text => {
                            if (text && text.trim()) {
                                const dialogueDiv = document.createElement('div');
                                dialogueDiv.className = 'dialogue-item';
                                dialogueDiv.innerHTML = `
                                    <textarea class="dialogue-text" oninput="autoResize(this)">${text}</textarea>
                                    <div class="dialogue-actions">
                                        <button class="dialogue-action-btn delete-dialogue-btn" onclick="deleteDialogue(this)">
                                            <i class="fas fa-trash"></i> Eliminar Diálogo
                                        </button>
                                    </div>
                                `;
                                panelContent.appendChild(dialogueDiv);
                            }
                        });
                    }
                    
                    // Añadir personajes
                    if (panel.characters && Array.isArray(panel.characters)) {
                        panel.characters.forEach(charId => {
                            const char = characters.find(c => c.id === charId);
                            if (char) {
                                const characterDiv = document.createElement('div');
                                characterDiv.className = `character-in-panel ${char.color}`;
                                characterDiv.dataset.characterId = char.id;
                                characterDiv.innerHTML = `
                                    <div class="character-icon">
                                        <i class="fas ${char.icon}"></i>
                                    </div>
                                    <div>
                                        <strong>${char.name}</strong>
                                        <div style="font-size: 0.8rem; color: #6c757d;">${char.description}</div>
                                    </div>
                                    <button class="remove-character-btn" onclick="removeCharacter(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                `;
                                panelContent.appendChild(characterDiv);
                            }
                        });
                    }
                }
            });
            
            // Ocultar biblioteca
            hideLibrary();
            
            // Mostrar mensaje
            alert(`¡Cómic "${comic.title}" cargado correctamente!\n\nAhora puedes editarlo y guardar los cambios.`);
        }
        
        // Eliminar cómic de la biblioteca
        function deleteComicFromLibrary(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar este cómic? Esta acción no se puede deshacer.')) {
                return;
            }
            
            let comics = getComicsFromStorage();
            comics = comics.filter(c => c.id !== id);
            saveComicsToStorage(comics);
            
            loadLibrary();
            alert('Cómic eliminado correctamente');
        }
        
        // ========== FUNCIONES DEL EDITOR ==========
        
        // Seleccionar personaje
        function selectCharacter(element) {
            // Quitar selección anterior
            document.querySelectorAll('.character-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Seleccionar nuevo personaje
            element.classList.add('active');
            selectedCharacter = {
                id: element.dataset.id,
                type: element.dataset.type,
                name: element.dataset.name,
                description: element.dataset.description,
                icon: element.dataset.icon,
                color: element.classList[1]
            };
            
            document.getElementById('selectedCharacterName').textContent = 
                `Seleccionado: ${selectedCharacter.name}`;
        }
        
        // Añadir personaje seleccionado a la viñeta actual
        function addSelectedCharacter() {
            if (!selectedCharacter) {
                alert('Por favor, selecciona un personaje primero');
                return;
            }
            
            const currentPanel = document.querySelector('.comic-panel:last-child');
            if (!currentPanel) return;
            
            const panelId = currentPanel.dataset.panel;
            const panelContent = document.getElementById(`panel-content-${panelId}`);
            
            const characterDiv = document.createElement('div');
            characterDiv.className = `character-in-panel ${selectedCharacter.color}`;
            characterDiv.dataset.characterId = selectedCharacter.id;
            
            characterDiv.innerHTML = `
                <div class="character-icon">
                    <i class="fas ${selectedCharacter.icon}"></i>
                </div>
                <div>
                    <strong>${selectedCharacter.name}</strong>
                    <div style="font-size: 0.8rem; color: #6c757d;">${selectedCharacter.description}</div>
                </div>
                <button class="remove-character-btn" onclick="removeCharacter(this)">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            panelContent.appendChild(characterDiv);
        }
        
        // Remover personaje
        function removeCharacter(button) {
            const characterDiv = button.closest('.character-in-panel');
            characterDiv.style.animation = 'appear 0.3s ease reverse';
            setTimeout(() => {
                characterDiv.remove();
            }, 250);
        }
        
        // Añadir diálogo
        function addDialogueToPanel() {
            const currentPanel = document.querySelector('.comic-panel:last-child');
            if (!currentPanel) return;
            
            const panelId = currentPanel.dataset.panel;
            const panelContent = document.getElementById(`panel-content-${panelId}`);
            
            dialogueCounter++;
            const dialogueId = `dialogue-${panelId}-${dialogueCounter}`;
            
            const dialogueDiv = document.createElement('div');
            dialogueDiv.className = 'dialogue-item';
            
            dialogueDiv.innerHTML = `
                <textarea class="dialogue-text" placeholder="Escribe el diálogo aquí..." 
                          oninput="autoResize(this)"></textarea>
                <div class="dialogue-actions">
                    <button class="dialogue-action-btn delete-dialogue-btn" onclick="deleteDialogue(this)">
                        <i class="fas fa-trash"></i> Eliminar Diálogo
                    </button>
                </div>
            `;
            
            panelContent.appendChild(dialogueDiv);
            
            setTimeout(() => {
                dialogueDiv.querySelector('.dialogue-text').focus();
            }, 100);
        }
        
        // Eliminar diálogo
        function deleteDialogue(button) {
            const dialogueDiv = button.closest('.dialogue-item');
            dialogueDiv.style.animation = 'slideIn 0.3s ease reverse';
            setTimeout(() => {
                dialogueDiv.remove();
            }, 250);
        }
        
        // Auto-ajustar tamaño del textarea
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = (textarea.scrollHeight) + 'px';
        }
        
        // Añadir nueva viñeta
        function addNewPanel() {
            panelCounter++;
            
            const comicArea = document.getElementById('comicArea');
            
            const panelDiv = document.createElement('div');
            panelDiv.className = 'comic-panel';
            panelDiv.id = `panel-${panelCounter}`;
            panelDiv.dataset.panel = panelCounter;
            
            panelDiv.innerHTML = `
                <div class="panel-header">
                    <div class="panel-number">Viñeta ${panelCounter}</div>
                    <div class="panel-actions">
                        <button class="panel-action-btn delete-panel-btn" onclick="deletePanel(${panelCounter})" title="Eliminar viñeta">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content" id="panel-content-${panelCounter}"></div>
            `;
            
            comicArea.appendChild(panelDiv);
            panelDiv.scrollIntoView({ behavior: 'smooth' });
            
            setTimeout(() => {
                addDialogueToPanel();
            }, 300);
        }
        
        // Eliminar viñeta
        function deletePanel(panelNumber) {
            const panel = document.getElementById(`panel-${panelNumber}`);
            const totalPanels = document.querySelectorAll('.comic-panel').length;
            
            if (totalPanels <= 1) {
                alert('Debe haber al menos una viñeta');
                return;
            }
            
            if (confirm('¿Estás seguro de que quieres eliminar esta viñeta?')) {
                panel.style.animation = 'appear 0.3s ease reverse';
                setTimeout(() => {
                    panel.remove();
                    renumberPanels();
                }, 250);
            }
        }
        
        // Renumerar viñetas
        function renumberPanels() {
            const panels = document.querySelectorAll('.comic-panel');
            panelCounter = panels.length;
            
            panels.forEach((panel, index) => {
                const panelNumber = index + 1;
                panel.id = `panel-${panelNumber}`;
                panel.dataset.panel = panelNumber;
                panel.querySelector('.panel-number').textContent = `Viñeta ${panelNumber}`;
                
                const oldContentId = panel.querySelector('.panel-content').id;
                const newContentId = `panel-content-${panelNumber}`;
                panel.querySelector('.panel-content').id = newContentId;
            });
        }
        
        // Limpiar viñeta actual
        function clearCurrentPanel() {
            const currentPanel = document.querySelector('.comic-panel:last-child');
            if (!currentPanel) return;
            
            const panelId = currentPanel.dataset.panel;
            const panelContent = document.getElementById(`panel-content-${panelId}`);
            
            if (panelContent.children.length === 0) {
                alert('Esta viñeta ya está vacía');
                return;
            }
            
            if (confirm('¿Estás seguro de que quieres limpiar esta viñeta?')) {
                panelContent.innerHTML = '';
                addDialogueToPanel();
            }
        }
        
        // Limpiar todas las viñetas
        function clearAllPanels() {
            if (confirm('¿Estás seguro de que quieres limpiar TODAS las viñetas?')) {
                const panels = document.querySelectorAll('.comic-panel');
                panels.forEach(panel => {
                    const panelId = panel.dataset.panel;
                    const panelContent = document.getElementById(`panel-content-${panelId}`);
                    panelContent.innerHTML = '';
                });
                
                addDialogueToPanel();
                alert('Todas las viñetas han sido limpiadas');
            }
        }
        
        // Cambiar color del borde
        function changeBorderColor(element) {
            document.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('active');
            });
            element.classList.add('active');
            
            const color = element.dataset.color;
            document.querySelectorAll('.comic-panel').forEach(panel => {
                panel.style.borderColor = color;
            });
        }
        
        // Cambiar color de fondo
        function changeBackgroundColor(element) {
            document.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('active');
            });
            element.classList.add('active');
            
            const color = element.dataset.bgcolor;
            document.querySelectorAll('.comic-panel').forEach(panel => {
                panel.style.backgroundColor = color;
            });
        }
        
        // Guardar cómic en la galería
        function saveComicToGallery() {
            const title = document.getElementById('comicTitle').value.trim();
            const subject = document.getElementById('subjectSelect').value;
            
            if (!title) {
                alert('Por favor, ingresa un título para tu cómic');
                return;
            }
            
            // Verificar que el usuario esté logueado
            if (!currentUser) {
                alert('Por favor, inicia sesión para guardar cómics');
                document.getElementById('signInBtn').click();
                return;
            }
            
            // Recopilar datos
            const panels = [];
            const panelElements = document.querySelectorAll('.comic-panel');
            
            panelElements.forEach(panel => {
                const panelId = panel.dataset.panel;
                const panelContent = document.getElementById(`panel-content-${panelId}`);
                
                const dialogues = [];
                const panelCharacters = [];
                
                // Diálogos
                panelContent.querySelectorAll('.dialogue-item').forEach(dialogue => {
                    const textarea = dialogue.querySelector('.dialogue-text');
                    if (textarea && textarea.value.trim()) {
                        dialogues.push(textarea.value.trim());
                    }
                });
                
                // Personajes
                panelContent.querySelectorAll('.character-in-panel').forEach(char => {
                    const charId = char.dataset.characterId;
                    if (charId) {
                        panelCharacters.push(parseInt(charId));
                    }
                });
                
                if (dialogues.length > 0 || panelCharacters.length > 0) {
                    panels.push({
                        panelNumber: parseInt(panelId),
                        text: dialogues,
                        characters: panelCharacters
                    });
                }
            });
            
            if (panels.length === 0) {
                alert('¡Añade al menos un diálogo o personaje!');
                return;
            }
            
            // Guardar en localStorage
            let comics = getComicsFromStorage();
            const now = new Date().toISOString();
            
            if (currentComic.id) {
                // Actualizar
                const index = comics.findIndex(c => c.id === currentComic.id);
                if (index !== -1) {
                    comics[index] = {
                        ...comics[index],
                        title: title,
                        subject: subject,
                        panels: panels,
                        updatedAt: now
                    };
                }
            } else {
                // Nuevo cómic
                const newComic = {
                    id: Date.now(),
                    title: title,
                    subject: subject,
                    panels: panels,
                    createdAt: now,
                    updatedAt: now,
                    author: currentUser.username,
                    description: `Cómic educativo sobre ${getSubjectLabel(subject)}`,
                    likes: 0,
                    views: 0,
                    comments: 0
                };
                
                comics.push(newComic);
            }
            
            saveComicsToStorage(comics);
            
            // Actualizar estadísticas del usuario
            userComicsCount++;
            userPoints += 100; // 100 puntos por crear un cómic
            
            // Guardar estadísticas del usuario
            if (currentUser) {
                currentUser.comicsCount = userComicsCount;
                currentUser.points = userPoints;
                localStorage.setItem('educomicUser', JSON.stringify(currentUser));
            }
            
            alert(`¡Cómic "${title}" guardado exitosamente!\n\nViñetas: ${panels.length}\n\nHas ganado 100 puntos.`);
            
            // Resetear editor
            resetEditor();
            
            // Ocultar editor
            closeComicCreator();
            
            // Mostrar mensaje de éxito
            setTimeout(() => {
                alert('¡Tu cómic ha sido publicado en la galería! Ahora otros estudiantes pueden verlo y darle "me gusta".');
                
                // Actualizar galería si estamos en esa sección
                if (currentSection === 'galeria' || currentSection === 'mis-comics') {
                    navigateToSection(currentSection);
                }
                
                // Actualizar ranking si estamos en esa sección
                if (currentSection === 'ranking') {
                    updateUserRankingStats();
                }
                
                // Actualizar botón "Mis Cómics"
                updateMyComicsButton();
            }, 500);
        }
        
        // Resetear editor
        function resetEditor() {
            panelCounter = 1;
            currentPanelId = 1;
            dialogueCounter = 0;
            selectedCharacter = null;
            currentComic = {
                id: null,
                title: 'Mi Aventura Educativa',
                subject: 'matematicas',
                panels: [],
                createdAt: null,
                updatedAt: null
            };
            
            document.getElementById('selectedCharacterName').textContent = '';
            document.querySelectorAll('.character-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const comicArea = document.getElementById('comicArea');
            comicArea.innerHTML = `
                <div class="comic-panel" id="panel-1" data-panel="1">
                    <div class="panel-header">
                        <div class="panel-number">Viñeta 1</div>
                        <div class="panel-actions">
                            <button class="panel-action-btn delete-panel-btn" onclick="deletePanel(1)" title="Eliminar viñeta">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content" id="panel-content-1"></div>
                </div>
            `;
            
            document.getElementById('comicTitle').value = 'Mi Aventura Educativa';
            document.getElementById('subjectSelect').value = 'matematicas';
            
            addDialogueToPanel();
        }
        
        // ========== NAVEGACIÓN DEL EDITOR ==========
        
        // Abrir creador de cómics
        function openComicCreator() {
            if (!currentUser) {
                alert('Por favor inicia sesión para crear cómics.');
                document.getElementById('signInBtn').click();
                return;
            }
            
            document.getElementById('comicCreatorModal').style.display = 'flex';
            initializeEditor();
        }
        
        // Cerrar creador de cómics
        function closeComicCreator() {
            if (confirm('¿Estás seguro de que quieres cerrar el editor? Los cambios no guardados se perderán.')) {
                document.getElementById('comicCreatorModal').style.display = 'none';
                resetEditor();
                hideLibrary();
            }
        }
        
        // ========== SISTEMA DE LOGIN/LOGOUT ==========
        
        const signInBtn = document.getElementById('signInBtn');
        const loginModal = document.getElementById('loginModal');
        const closeModal = document.getElementById('closeModal');
        const userWelcome = document.getElementById('userWelcome');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginForm = document.getElementById('loginForm');
        const comicCreatorBtn = document.getElementById('comicCreatorBtn');
        const forgotPassword = document.getElementById('forgotPassword');
        const mainHeader = document.getElementById('mainHeader');
        const mouseDetectionZone = document.getElementById('mouseDetectionZone');
        const mainContent = document.querySelector('.main-content');
        const myComicsBtn = document.getElementById('myComicsBtn');
        
        // Verificar si hay usuario guardado
        function checkLoggedInUser() {
            const savedUser = localStorage.getItem('educomicUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInterface();
            }
        }
        
        // Actualizar interfaz según estado de login
        function updateUserInterface() {
            if (currentUser) {
                userWelcome.style.display = 'flex';
                signInBtn.style.display = 'none';
                usernameDisplay.textContent = currentUser.username;
                
                // Actualizar botón "Mis Cómics"
                updateMyComicsButton();
                
                // Cargar estadísticas del usuario
                userComicsCount = currentUser.comicsCount || 0;
                userPoints = currentUser.points || 0;
            } else {
                userWelcome.style.display = 'none';
                signInBtn.style.display = 'block';
                if (myComicsBtn) myComicsBtn.style.display = 'none';
            }
        }
        
        // Login
        signInBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.style.display = 'flex';
        });
        
        closeModal.addEventListener('click', () => {
            loginModal.style.display = 'none';
        });
        
        comicCreatorBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openComicCreator();
        });
        
        // Botón "Mis Cómics"
        if (myComicsBtn) {
            myComicsBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (!currentUser) {
                    alert('Por favor inicia sesión para ver tus cómics.');
                    signInBtn.click();
                    return;
                }
                navigateToSection('mis-comics');
            });
        }
        
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) {
                loginModal.style.display = 'none';
            }
        });
        
        // Manejo del formulario de login
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const username = document.getElementById('username').value;
            
            if (!email || !password || !username) {
                alert('Por favor completa todos los campos');
                return;
            }
            
            const submitBtn = loginForm.querySelector('.btn');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Accediendo...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                currentUser = {
                    email: email,
                    username: username,
                    joinDate: new Date().toISOString(),
                    comicsCount: userComicsCount,
                    points: userPoints
                };
                localStorage.setItem('educomicUser', JSON.stringify(currentUser));
                
                updateUserInterface();
                
                loginModal.style.display = 'none';
                loginForm.reset();
                submitBtn.innerHTML = '<i class="fas fa-rocket"></i> Acceder al Portal';
                submitBtn.disabled = false;
                
                alert(`¡Bienvenido a EDUCÓMIC, ${username}! Ahora puedes crear tus propios cómics educativos.`);
            }, 1500);
        });
        
        // Logout
        logoutBtn.addEventListener('click', () => {
            if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
                currentUser = null;
                localStorage.removeItem('educomicUser');
                updateUserInterface();
                alert('Has cerrado sesión correctamente. ¡Vuelve pronto!');
            }
        });
        
        // Olvidé mi contraseña
        forgotPassword.addEventListener('click', (e) => {
            e.preventDefault();
            alert('Se ha enviado un correo para restablecer tu contraseña. (Funcionalidad simulada)');
        });
        
        // Sistema para ocultar/mostrar el header completo al hacer scroll
        function handleScroll() {
            const currentScrollY = window.scrollY;
            
            if (currentScrollY > lastScrollY && currentScrollY > 100) {
                if (!isHeaderHidden) {
                    hideHeader();
                }
            } 
            else if (currentScrollY < lastScrollY) {
                if (isHeaderHidden && currentScrollY < lastScrollY - 10) {
                    showHeader();
                }
            }
            
            lastScrollY = currentScrollY;
            
            if (isHeaderHidden) {
                mainContent.style.marginTop = '60px';
            } else {
                mainContent.style.marginTop = '160px';
            }
        }
        
        function hideHeader() {
            clearTimeout(showTimeout);
            mainHeader.classList.remove('visible');
            mainHeader.classList.add('hidden');
            isHeaderHidden = true;
            
            mouseDetectionZone.classList.add('active');
        }
        
        function showHeader() {
            clearTimeout(hideTimeout);
            mainHeader.classList.remove('hidden');
            mainHeader.classList.add('visible');
            isHeaderHidden = false;
            
            mouseDetectionZone.classList.remove('active');
        }
        
        // Event listener para el scroll
        window.addEventListener('scroll', handleScroll, { passive: true });
        
        // Mostrar header cuando el mouse entra en la zona de detección
        mouseDetectionZone.addEventListener('mouseenter', () => {
            if (isHeaderHidden) {
                showHeader();
                
                hideTimeout = setTimeout(() => {
                    if (!mainHeader.matches(':hover')) {
                        hideHeader();
                    }
                }, 3000);
            }
        });
        
        // Mantener header visible cuando el mouse está sobre él
        mainHeader.addEventListener('mouseenter', () => {
            clearTimeout(hideTimeout);
        });
        
        mainHeader.addEventListener('mouseleave', () => {
            if (window.scrollY > 100) {
                hideTimeout = setTimeout(() => {
                    if (!mouseDetectionZone.matches(':hover')) {
                        hideHeader();
                    }
                }, 1000);
            }
        });
        
        // Navegación por enlaces
        document.addEventListener('click', function(e) {
            if (e.target.closest('.nav-link')) {
                e.preventDefault();
                const link = e.target.closest('.nav-link');
                const section = link.dataset.section || 'inicio';
                navigateToSection(section);
                
                if (isHeaderHidden) {
                    showHeader();
                }
            }
        });
        
        // Manejar navegación atrás/adelante del navegador
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.section) {
                navigateToSection(event.state.section);
            }
        });
        
        // Cargar sección inicial basada en URL
        function loadInitialSection() {
            const hash = window.location.hash.substring(1);
            if (hash && document.getElementById(hash)) {
                navigateToSection(hash);
            } else {
                navigateToSection('inicio');
            }
        }
        
        // Añadir event listeners a los botones dinámicos
        function attachEventListeners() {
            // Botones de matemáticas
            document.querySelectorAll('.showMathExampleBtn').forEach(btn => {
                btn.addEventListener('click', () => {
                    showMathExample(btn.dataset.type);
                });
            });
            
            // Botones de información de personajes
            document.querySelectorAll('.showCharacterInfoBtn').forEach(btn => {
                btn.addEventListener('click', () => {
                    showCharacterInfo(btn.dataset.character);
                });
            });
            
            // Botones de la galería
            document.querySelectorAll('.filter-gallery-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    filterGallery(btn.dataset.filter);
                });
            });
            
            // Botones para ver cómics
            document.querySelectorAll('.view-comic-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    viewComic(parseInt(btn.dataset.id));
                });
            });
            
            // Botones de ejemplo de cómics
            document.querySelectorAll('.comic-example-card').forEach(card => {
                card.addEventListener('click', function() {
                    const comicType = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    showExampleComic(comicType);
                });
            });
            
            // Botones de "Mis Cómics"
            document.querySelectorAll('.view-my-comic-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const comics = getComicsFromStorage();
                    const userComics = comics.filter(comic => comic.author === currentUser.username);
                    const comicIndex = parseInt(btn.dataset.index);
                    if (userComics[comicIndex]) {
                        viewComic(userComics[comicIndex].id);
                    }
                });
            });
            
            document.querySelectorAll('.edit-comic-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const comics = getComicsFromStorage();
                    const userComics = comics.filter(comic => comic.author === currentUser.username);
                    const comicIndex = parseInt(btn.dataset.index);
                    
                    if (userComics[comicIndex]) {
                        // Cargar cómic en el editor
                        loadComicIntoEditor(userComics[comicIndex].id);
                        openComicCreator();
                    }
                });
            });
            
            document.querySelectorAll('.delete-comic-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const comics = getComicsFromStorage();
                    const userComics = comics.filter(comic => comic.author === currentUser.username);
                    const comicIndex = parseInt(btn.dataset.index);
                    
                    if (userComics[comicIndex] && confirm('¿Estás seguro de que quieres eliminar este cómic?')) {
                        // Encontrar el índice en el array completo
                        const fullIndex = comics.findIndex(c => c.id === userComics[comicIndex].id);
                        if (fullIndex !== -1) {
                            comics.splice(fullIndex, 1);
                            saveComicsToStorage(comics);
                            
                            // Actualizar estadísticas
                            userComicsCount--;
                            userPoints = Math.max(0, userPoints - 100);
                            
                            if (currentUser) {
                                currentUser.comicsCount = userComicsCount;
                                currentUser.points = userPoints;
                                localStorage.setItem('educomicUser', JSON.stringify(currentUser));
                            }
                            
                            alert('Cómic eliminado correctamente');
                            loadMyComics();
                            updateMyComicsButton();
                        }
                    }
                });
            });
            
            // Botones específicos de cada sección
            const buttonHandlers = {
                // Inicio
                'startLearningBtn': () => navigateToSection('matematicas'),
                'openCreatorFromSlide': () => openComicCreator(),
                'participateContestBtn': () => participateContest(),
                'createFirstComicGallery': () => openComicCreator(),
                'openCreatorFromGallery': () => openComicCreator(),
                'openCreatorFromRanking': () => openComicCreator(),
                
                // Lengua
                'startWritingBtn': () => startWriting(),
                'joinBookClubBtn': () => joinBookClub(),
                'enterContestBtn': () => enterContest(),
                
                // Sociales
                'showHistoryTimelineBtn': () => showHistoryTimeline(),
                'exploreCulturesBtn': () => exploreCultures(),
                'openInteractiveMapBtn': () => openInteractiveMap(),
                
                // Naturales
                'showEcologyComicBtn': () => showEcologyComic(),
                'exploreBodySystemsBtn': () => exploreBodySystems(),
                'startExperimentBtn': () => startExperiment(),
                
                // Ranking
                'viewMyComicsBtn': () => viewMyComics(),
                'viewAchievementsBtn': () => viewAchievements(),
                
                // Mis Cómics
                'createFirstComicBtn': () => openComicCreator(),
                'createNewComicBtn': () => openComicCreator(),
                'backToGalleryBtn': () => navigateToSection('galeria')
            };
            
            // Asignar handlers a los botones
            Object.keys(buttonHandlers).forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    button.addEventListener('click', buttonHandlers[buttonId]);
                }
            });
            
            // Enlaces del footer
            document.querySelectorAll('.social-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const platform = link.querySelector('i').className.split(' ')[1].split('-')[1];
                    alert(`Redirigiendo a ${platform} (funcionalidad simulada)`);
                });
            });
            
            // Botón de búsqueda
            const searchButton = document.querySelector('.search-bar button');
            const searchInput = document.querySelector('.search-bar input');
            
            if (searchButton && searchInput) {
                const performSearch = () => {
                    if (searchInput.value.trim()) {
                        alert(`Buscando: "${searchInput.value}" (funcionalidad simulada)`);
                    }
                };
                
                searchButton.addEventListener('click', performSearch);
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
        }
        
        // Función para ver mis cómics
        function viewMyComics() {
            navigateToSection('mis-comics');
        }
        
        // Funciones de ejemplo para botones
        function showMathExample(type) {
            const examples = {
                estadisticas: 'Ejemplo: Si 10 estudiantes califican un cómic con [5,4,3,5,4,5,3,4,5,4], el promedio es 4.3.',
                geometria: 'Ejemplo: El área de un triángulo con base 10cm y altura 5cm es 25cm² (Área = base × altura ÷ 2).',
                algebra: 'Ejemplo: Resuelve 3x - 7 = 8 → 3x = 15 → x = 5'
            };
            
            alert(`📐 ${examples[type] || 'Ejemplo cargado correctamente.'}`);
        }
        
        function showCharacterInfo(character) {
            const characters = {
                pitagoras: 'Pitágoras: Matemático griego famoso por su teorema sobre triángulos rectángulos.',
                ada: 'Ada Lovelace: Primera programadora de la historia, colaboró con Charles Babbage.',
                einstein: 'Albert Einstein: Desarrolló la teoría de la relatividad, ganador del Nobel.',
                cervantes: 'Miguel de Cervantes: Autor de "Don Quijote de la Mancha".',
                'garcia-marquez': 'Gabriel García Márquez: Autor de "Cien años de soledad", Nobel de Literatura.',
                allende: 'Isabel Allende: Escritora chilena, autora de "La casa de los espíritus".',
                bolivar: 'Simón Bolívar: Conocido como "El Libertador", líder independentista.',
                'rosa-parks': 'Rosa Parks: Activista por los derechos civiles en EE.UU.',
                gandhi: 'Mahatma Gandhi: Líder del movimiento de independencia de la India.',
                curie: 'Marie Curie: Primera mujer en ganar un Nobel, descubrió el radio.',
                darwin: 'Charles Darwin: Formuló la teoría de la evolución por selección natural.',
                goodall: 'Jane Goodall: Primatóloga, estudió chimpancés por 60 años.'
            };
            
            alert(`📖 ${characters[character] || 'Información sobre el personaje cargada correctamente.'}`);
        }
        
        function startWriting() {
            alert('✍️ ¡Redirigiendo al editor de escritura creativa!');
        }
        
        function joinBookClub() {
            alert('📚 ¡Te has unido al club de lectura! Recibirás notificaciones sobre nuevos libros.');
        }
        
        function enterContest() {
            alert('🏆 ¡Inscripción al concurso literario completada! Buena suerte.');
        }
        
        function showHistoryTimeline() {
            alert('📅 ¡Abriendo línea temporal interactiva! Explora los eventos históricos más importantes.');
        }
        
        function exploreCultures() {
            alert('🌍 ¡Explorando culturas del mundo! Descubre tradiciones, comidas y festividades.');
        }
        
        function openInteractiveMap() {
            alert('🗺️ ¡Abriendo mapa interactivo! Explora países, capitales y características geográficas.');
        }
        
        function showEcologyComic() {
            alert('🌱 ¡Mostrando cómic ecológico! Aprende sobre reciclaje y conservación ambiental.');
        }
        
        function exploreBodySystems() {
            alert('🫀 ¡Explorando sistemas del cuerpo humano! Aprende sobre anatomía de forma interactiva.');
        }
        
        function startExperiment() {
            alert('🧪 ¡Comenzando experimento! Sigue las instrucciones paso a paso para crear un volcán de bicarbonato.');
        }
        
        function participateContest() {
            alert('🎯 ¡Redirigiendo al formulario de participación en el concurso!');
        }
        
        function viewAchievements() {
            alert('🏆 Mostrando tus logros y medallas...');
        }
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            checkLoggedInUser();
            loadInitialSection();
            attachEventListeners();
        });
    </script>
</body>
</html>